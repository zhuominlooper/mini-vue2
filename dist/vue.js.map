{"version":3,"file":"vue.js","sources":["../src/utils/index.js","../src/globalApi/index.js","../src/observe/arr.js","../src/observe/dep.js","../src/observe/index.js","../src/utils/nextTick.js","../src/observe/watcher.js","../src/initState.js","../src/vnode/patch.js","../src/vnode/lifecycle.js","../src/compile/parseAst.js","../src/compile/generate.js","../src/compile/index.js","../src/init.js","../src/vnode/index.js","../src/index.js"],"sourcesContent":["export const HOOKS = ['beforeCreate', 'created', 'beforeMount', 'mounted', 'beforeUpdate', 'updated', 'beforeDestory', 'destroyed'];\r\n\r\n//策略模式\r\nlet starts={}\r\nstarts.data=function(parentVal,childVal){\r\n  return childVal\r\n}\r\n// starts.computed = function () {};\r\n// starts.watch = function () {};\r\n// starts.methods = function () {};\r\n\r\nHOOKS.forEach(hooks=>{\r\n  starts[hooks] = mergeHook;\r\n})\r\n\r\nfunction mergeHook(parentVal,childVal){\r\n  if(childVal){\r\n    if(parentVal){\r\n      return parentVal.concat(childVal)\r\n    }else{\r\n      return [childVal]\r\n    }\r\n  }else{\r\n    return parentVal\r\n  }\r\n}\r\nexport function mergeOptions(parent, child) {\r\n  const options = {};\r\n  //有父亲，没有儿子\r\n  for (let key in parent) {\r\n    mergeField(key);\r\n  }\r\n  //有儿子没父亲\r\n  for (let key in child) {\r\n    mergeField(key);\r\n  }\r\n  function mergeField(key) {\r\n    if (starts[key]) {\r\n      options[key] = starts[key](parent[key], child[key]);\r\n    } else {\r\n      options[key] = child[key];\r\n    }\r\n  }\r\n\r\n  return options;\r\n}\r\n","import { mergeOptions } from '../utils/index';\r\nexport function initGlobApi(Vue){\r\n  //mixin是对象\r\n  Vue.options={}\r\n  Vue.Mixin = function (mixin) {\r\n    //对象合并\r\n  this.options = mergeOptions(this.options, mixin); //this是Vue\r\n   console.log('this.optionsthis.options', this.options);\r\n  };\r\n}","//重新数组的方法\r\n\r\n// 1.获取原来的数组方法\r\nlet oldArrayProtoMethods = Array.prototype;\r\n// 2.继承\r\nexport const ArrayMethods = Object.create(oldArrayProtoMethods); //create是继承当前值的原型，create(null)，去掉原型\r\n\r\n// 3.劫持\r\nlet methods = [\"push\", \"pop\", \"unshift\", \"shift\", \"splice\"];\r\n\r\nmethods.forEach((item) => {\r\n  ArrayMethods[item] = function (...args) {\r\n    let reault = oldArrayProtoMethods[item].apply(this, args); //返回数据 this是当前劫持的数组实例\r\n    let inserted;\r\n    switch (item) {\r\n      case \"push\":\r\n      case \"unshift\":\r\n        inserted = args;\r\n        break;\r\n      case \"splice\":\r\n        inserted = args.splice(2);\r\n         break;\r\n    }\r\n    let ob=this.__ob__\r\n    if (inserted){\r\n      ob.observerArray(inserted);//对添加的对象进行劫持\r\n    } \r\n     ob.dep.notify()\r\n    return reault;\r\n  };\r\n});\r\n\r\n//重写数组的方法\r\n// 通过函数劫持做了处理\r\n//采用切片思想\r\n","let depId = 0;\r\nexport class Dep{\r\n  constructor(){\r\n     this.id = depId++;\r\n    this.subs=[]\r\n  }\r\n  depend(){\r\n    //watcher和dep双向记忆\r\n    Dep.target.addDep(this)\r\n  }\r\n  addSub(watcher){\r\n       this.subs.push(watcher);\r\n  }\r\n  //更新\r\n  notify(){\r\n    this.subs.forEach(watcher=>{\r\n      watcher.update()\r\n    })\r\n  }\r\n}\r\n\r\n//添加watcher\r\nDep.target=null\r\nexport function pushTarget(watcher){\r\n  Dep.target=watcher\r\n}\r\n\r\n\r\nexport function popTarget(){\r\n  Dep.target = null;\r\n}","import { ArrayMethods } from './arr';\r\nimport { Dep } from './dep';\r\nexport function observer(data) {\r\n  //不是对象或者是空，不进行劫持\r\n  if (typeof data !== 'object' || data === null) {\r\n    return data;\r\n  }\r\n  return new Observer(data);\r\n}\r\n\r\nclass Observer {\r\n  constructor(value) {\r\n    Object.defineProperty(value, '__ob__', {\r\n      enumerable: false,\r\n      configurable: false, //控制该属性不能改变\r\n      value: this, //拿到new Observer 实例，调用observerArray\r\n    });\r\n    this.dep = new Dep(); //所有对象都添加dep\r\n    //观测数据是数组还是对象\r\n    if (Array.isArray(value)) {\r\n      value.__proto__ = ArrayMethods; //操作之后必定返回数组\r\n      //如果是数组对象\r\n      this.observerArray(value);\r\n    } else {\r\n      this.walk(value); //进行对象数据遍历\r\n    }\r\n  }\r\n\r\n  walk(data) {\r\n    let keys = Object.keys(data); //拿到所有的key\r\n    for (let i = 0, length = keys.length; i < length; i++) {\r\n      //对每个属性进行劫持\r\n      let key = keys[i];\r\n      let value = data[key];\r\n      defineRecative(data, key, value);\r\n    }\r\n  }\r\n  //劫持数组对象\r\n  observerArray(value) {\r\n    if (value) {\r\n      for (let i = 0; i < value.length; i++) {\r\n        observer(value[i]);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n//对对象中的属性进行劫持\r\nfunction defineRecative(data, key, value) {\r\n  //深度代理，递归代理\r\n  let childDep = observer(value);\r\n  let dep = new Dep();\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      if (Dep.target) {\r\n        dep.depend(); //收集watcher\r\n        if (childDep.dep) {\r\n          childDep.dep.depend(); //对象收集\r\n        }\r\n      }\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) {\r\n        //数据相同不改变\r\n        return;\r\n      }\r\n      observer(newValue); //新值是对象就进行劫持\r\n      value = newValue;\r\n      dep.notify(); //进行watcher更新\r\n    },\r\n  });\r\n}\r\n\r\n//对象进行劫持\r\n//Object.defineProperty只能一次对属性进行劫持，所有vue3使用proxy，懒劫持\r\n//递归遍历进行劫持，对新设置的值也进行劫持(只会对新的对象进行劫持)\r\n//递归劫持进行深度遍历\r\n","let callback = [];\r\nlet pengding = false;\r\nfunction flush() {\r\n  callback.forEach((cb) => cb());\r\n  pengding = false;\r\n}\r\nlet timerFunc;\r\nif (Promise) {\r\n  //判断浏览器是否支持promsie\r\n  timerFunc = () => {\r\n     Promise.resolve().then(flush);\r\n  };\r\n} else if (MutationObserver) {\r\n  //h5的api,MutationObserver：异步方法，监控完毕dom变化之后再来异步更新\r\n  let observe = new MutationObserver();\r\n  let textNode = document.createTextNode(1); //创建文本\r\n  observe.observe(textNode, { characterData: true }); //观测文本的内容\r\n  timerFunc = () => {\r\n    textNode.textContent = 2;\r\n  };\r\n} else if (setImmediate) {\r\n  timerFunc = () => {\r\n    setImmediate(flush);\r\n  };\r\n}\r\nexport function nextTick(cb) {\r\n  //cb来自两部分，一个是用户的自定义cb，一个是dom批量更新的cb(更新多次，只调用一次)\r\n  // console.log('cb', cb);\r\n  callback.push(cb); //[cb1,cb2]\r\n  if (!pengding) {\r\n    pengding = true;\r\n     timerFunc();\r\n  }\r\n}\r\n","import { pushTarget, popTarget } from './dep';\r\nimport { nextTick } from '../utils/nextTick';\r\n//通过watcher类实现更新\r\nlet watcherId = 0;\r\nexport class watcher {\r\n  constructor(vm, updateComponent, cb, options) {\r\n    this.vm = vm;\r\n    this.exprOrfn = updateComponent;\r\n    this.cb = cb;\r\n    this.user=!!options.user\r\n    this.options = options;\r\n    this.deps = [];\r\n    this.depsId = new Set();\r\n    this.id = watcherId++; //表示每个组件watcher不一样\r\n    if (typeof updateComponent === 'function') {\r\n      this.getter = updateComponent; //更新视图\r\n    } else {\r\n      //watch 字符串,有可能是xxx.xx.xx\r\n      this.getter = function () {\r\n        let path = this.exprOrfn.split('.');\r\n        let obj = vm;\r\n        for (let i = 0; i < path.length; i++) {\r\n          obj = obj[path[i]];\r\n        }\r\n        return obj;\r\n      };\r\n    }\r\n    //初次渲染\r\n   this.value = this.get(); //保存watch第一次值\r\n  }\r\n  run() {\r\n    let value=this.get()\r\n    let oldVal=this.value\r\n    this.value=value\r\n    //用户的watch\r\n    if(this.user){\r\n        this.cb.call(this.vm,value,oldVal)\r\n    }\r\n  }\r\n  get() {\r\n    pushTarget(this); //添加watcher给dep\r\n    const value= this.getter(); //渲染页面\r\n    popTarget(); //渲染完成，取消dep中的watcher\r\n    return value\r\n  }\r\n  //数据改变的时候更新\r\n  update() {\r\n    //数据更新之后，不要每次调用get方法。\r\n    queueWatcher(this);\r\n  }\r\n  addDep(dep) {\r\n    //去重\r\n    let id = dep.id;\r\n    if (!this.depsId.has(id)) {\r\n      this.deps.push(dep);\r\n      this.depsId.add(id);\r\n      dep.addSub(this);\r\n    }\r\n  }\r\n}\r\nlet queue = []; //将需要批量更新的watcher存放到队列中\r\nlet has = {};\r\nlet pending = false;\r\nfunction flusWacter() {\r\n  queue.forEach((item) => {\r\n    item.run();\r\n  });\r\n  queue = [];\r\n  has = {};\r\n  pending = false;\r\n}\r\nfunction queueWatcher(watcher) {\r\n  //实现列队\r\n  let id = watcher.id;\r\n  //防抖,触发多次，只触发一次\r\n  if (!has[id]) {\r\n    //因为id都是同一个，所以只进去一次\r\n    queue.push(watcher);\r\n    has[id] = true;\r\n    if (!pending) {\r\n      nextTick(flusWacter); //nextTick：相当于定时器,异步处理\r\n    }\r\n    pending = true;\r\n  }\r\n}\r\n\r\n//收集依赖：使用dep去手机依赖\r\n//dep:dep和data的属性--对应\r\n//watcher:watcher和dep多对多\r\n\r\n//nextTick\r\n","import { observer } from './observe/index';\r\nimport { nextTick } from './utils/nextTick';\r\nimport { watcher as Watcher } from './observe/watcher';\r\n\r\nexport function initState(vm) {\r\n  let ops = vm.$options;\r\n  // if (ops.props) {\r\n  //   initProps();\r\n  // }\r\n  if (ops.data) {\r\n    initData(vm);\r\n  }\r\n  if (ops.watch) {\r\n    initWatch(vm);\r\n  }\r\n\r\n  // if (ops.computed) {\r\n  //   initComputed();\r\n  // }\r\n  // if (ops.methods) {\r\n  //   initMethods();\r\n  // }\r\n}\r\n\r\n//处理watch\r\nfunction initWatch(vm) {\r\n  let watch = vm.$options.watch;\r\n  for (let key in watch) {\r\n    let handler = watch[key];\r\n    if (Array.isArray(handler)) {\r\n      //数组\r\n      handler.forEach((item) => {\r\n        createWatcher(vm, key, item);\r\n      });\r\n    } else {\r\n      //对象，字符串，函数\r\n      createWatcher(vm, key, handler);\r\n    }\r\n  }\r\n}\r\n//对data进行初始化\r\nfunction initData(vm) {\r\n  let data = vm.$options.data; //可能是对象或者函数\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data; //这里this指向vue实例,所以需要call改变this指向, _data代理全部数据\r\n  // 将data上的所有属性代理到实例上,以便直接this.xxx进行访问，并且是响应式的\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key);\r\n  }\r\n  //对数据进行劫持\r\n  observer(data);\r\n}\r\n\r\nfunction proxy(vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key];\r\n    },\r\n    set(newValue) {\r\n      vm[source][key] = newValue;\r\n    },\r\n  });\r\n}\r\n\r\nexport function stateMixin(vm) {\r\n  vm.prototype.$nextTick = function (cb) {\r\n    //cb回调函数\r\n    return nextTick(cb);\r\n  };\r\n  //之前的watch步骤是做格式化统一数据结构\r\n  vm.prototype.$watch = function (Vue,exprOrfn, handler, options={}) {\r\n    //实现watch，就是调用new Wacher实现渲染绑定\r\n     let watcher = new Watcher(Vue, exprOrfn, handler, {...options,user:true});\r\n     if(options.immediate){//立即执行\r\n      handler.call(vm)\r\n     }\r\n  };\r\n}\r\n\r\n//watch四种使用方式：函数，对象，数组，字符串\r\n//最后是调用$watch\r\n\r\nfunction createWatcher(vm, exprOrfn, handler, options) {\r\n  //处理handler\r\n  if (typeof handler === 'object') {\r\n    options = handler;\r\n    handler = handler.handler;\r\n  }\r\n  if (typeof handler === 'string') {\r\n    handler = vm[handler];\r\n  }\r\n\r\n  return vm.$watch(vm,exprOrfn, handler, options);\r\n}\r\n","export function patch(oldVnode, vnode) {\r\n  //1表示元素节点初始化的时候oldVnode是真实dom，会使用vode转成真实dom去替换oldVnode(<div id=\"app\"></div>)\r\n  if (oldVnode.nodeType === 1) {\r\n    let el = createEl(vnode);\r\n    //替换dom，获取父节点，在插入新元素，删除老元素\r\n    let parentEL = oldVnode.parentNode; //获取父节点\r\n    parentEL.insertBefore(el, oldVnode.nextsibling);\r\n    parentEL.removeChild(oldVnode);\r\n    return el;\r\n  } else {\r\n    // 1.标签不一样，直接替换\r\n    if (oldVnode.tag !== vnode.tag) {\r\n      oldVnode.el.parentNode.replaceChild(createEl(vnode), oldVnode.el);\r\n    }\r\n\r\n    // 2.标签一样 text 属性不一样\r\n    if (!oldVnode.tag) {\r\n      if (oldVnode.text !== vnode.text) {\r\n        return (oldVnode.el.textContent = vnode.text);\r\n      }\r\n    }\r\n    // 2.1标签一样，替换属性\r\n    vnode.el = oldVnode.el;\r\n    let el = vnode.el;\r\n    updateProps(vnode, oldVnode.data || {});\r\n\r\n    //3 diff比对子元素,三种情况\r\n    let oldChildren = oldVnode.children || [];\r\n    let newChildren = vnode.children || [];\r\n    //新老都有\r\n    if (oldChildren.length && newChildren.length) {\r\n      updateChildren(oldChildren, newChildren, el);\r\n    } else if (oldChildren.length) {\r\n      //老得有，新的没有\r\n      el.innerHTML = '';\r\n    } else if (newChildren.length) {\r\n      //老的没有，新的有,直接插入新的\r\n      for (let i = 0; i < newChildren.length; i++) {\r\n        let child = newChildren[i];\r\n        //添加新的dom\r\n        el.appendChild(createEl(child));\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n//添加属性\r\nfunction updateProps(vnode, oldProps = {}) {\r\n  let newProps = vnode.data || {};\r\n  let el = vnode.el; //获取当前真实节点\r\n\r\n  //老的属性有，新的没有，移除\r\n  for (let key in oldProps) {\r\n    if (!newProps[key]) {\r\n      el.removeAttribute(key);\r\n    }\r\n  }\r\n  //样式改变\r\n  let newStyle = newProps.style || {};\r\n  let oldStyle = oldProps.style || {};\r\n  for (let key in oldStyle) {\r\n    if (!newStyle[key]) {\r\n      el.style = '';\r\n    }\r\n  }\r\n\r\n  for (let key in newProps) {\r\n    if (key === 'style') {\r\n      //梳理样式\r\n      for (let styleName in newProps.style) {\r\n        el.style[styleName] = newProps.style[styleName];\r\n      }\r\n    } else if (key === 'class') {\r\n      el.className = newProps.class;\r\n    } else {\r\n      el.setAttribute(key, newProps[key]);\r\n    }\r\n  }\r\n}\r\n\r\n//创建dom,同时dom也会挂载在vnode.el上\r\nexport function createEl(vnode) {\r\n  //vnode是对象，{tag:text,data...}\r\n  let { tag, children, key, data, text } = vnode;\r\n  if (typeof tag === 'string') {\r\n    //tag存在，是元素\r\n    vnode.el = document.createElement(tag); //创建元素\r\n    updateProps(vnode); //添加属性\r\n    if (children.length) {\r\n      children.forEach((child) => {\r\n        if (child) {\r\n          vnode.el.appendChild(createEl(child));\r\n        }\r\n      });\r\n    }\r\n  } else {\r\n    //文本的情况\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\n//新老都有，双指针进行比较\r\nfunction updateChildren(oldChildren, newChildren, parent) {\r\n  //创建双指针\r\n  let oldStartIndex = 0; //老的开头索引\r\n  let oldStartVnode = oldChildren[oldStartIndex]; //老的第一个元素\r\n  let oldEndIndex = oldChildren.length - 1; //老的结束索引\r\n  let oldEndVnode = oldChildren[oldEndIndex]; //老的结尾元素\r\n\r\n  let newStartIndex = 0; //新的开头索引\r\n  let newStartVnode = newChildren[newStartIndex]; //新的第一个元素\r\n  let newEndIndex = newChildren.length - 1; //新的结束索引\r\n  let newEndVnode = newChildren[newEndIndex]; //新的结尾元素\r\n  //判断是否是同一个元素\r\n  function isSomeVnode(old, newContent) {\r\n    return old.tag === newContent.tag && old.key === newContent.key;\r\n  }\r\n  function makeIndexByKey(children) {\r\n    let map = {\r\n      \r\n    };\r\n    children.forEach((item,index)=>{\r\n      if(item.key){\r\n        map[item.key]=index\r\n      }\r\n    })\r\n    return map\r\n  }\r\n  let map=makeIndexByKey(oldChildren) //暴力对比的映射表\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n    //头部比较,头部元素是不是同一个元素\r\n    if (isSomeVnode(oldStartVnode, newStartVnode)) {\r\n      //新前旧前\r\n      //递归\r\n      patch(oldStartVnode, newStartVnode);\r\n      //移动指针\r\n      oldStartVnode = oldChildren[++oldStartIndex];\r\n      newStartVnode = newChildren[++newStartIndex];\r\n    } else if ((oldEndVnode, newEndVnode)) {\r\n      //从尾巴开始比较，新后旧后\r\n      patch(oldEndVnode, newEndVnode);\r\n      oldEndVnode = oldChildren[--oldEndIndex];\r\n      newEndVnode = newChildren[--newEndIndex];\r\n    } else if (isSomeVnode(oldStartVnode, newEndVnode)) {\r\n      //旧前新后\r\n      patch(oldStartVnode, newEndVnode);\r\n      oldStartVnode = oldChildren[++oldStartIndex];\r\n      newEndVnode = newChildren[--newEndIndex];\r\n    } else if (isSomeVnode(oldEndVnode, newStartVnode)) {\r\n      //旧后新前\r\n      patch(oldEndVnode, newStartVnode);\r\n      oldEndVnode = oldChildren[--oldEndIndex];\r\n      newStartVnode = newChildren[++newStartIndex];\r\n    } else {\r\n      //暴力比对，新节点和纠结点没关系\r\n      //从老的元素中寻找是否有有新的元素\r\n      let moveIndex=map[newStartVnode.key]\r\n      if(!moveIndex){//没找到\r\n        parent.insertBefore(createEl(newStartVnode),oldStartVnode.el) //直接添加\r\n      }else{//找到了\r\n        let moveVnode=oldChildren[moveIndex]//获取到移动的元素\r\n        oldChildren[moveIndex]=null//防止数组塌陷\r\n        parent.insertBefore(moveVnode.el, oldStartVnode.el);//移动\r\n        patch(moveVnode,newEndVnode)\r\n      } \r\n      //做完操作新的元素指针位移\r\n      newStartVnode=newChildren[newEndIndex++]\r\n\r\n    }\r\n\r\n\r\n  }\r\n\r\n  //添加多余的儿子\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n      parent.appendChild(createEl(newChildren[i]));\r\n    }\r\n  }\r\n  //将多余的元素去掉\r\n    if (oldStartIndex <= oldEndIndex) {\r\n      for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n        let child=oldChildren[i]\r\n        if(!child){\r\n         parent.appendChild(child.el);\r\n        }\r\n       \r\n      }\r\n    }\r\n}\r\n","import { patch } from './patch';\r\nimport { watcher } from '../observe/watcher';\r\nexport function mounetComponent(vm, el) {\r\n  callHook(vm, 'beforeMounted');\r\n  let updataComponent = () => {\r\n    vm._update(vm._render()); //vm._render将render函数变成vnode  ,_update将vnode变成真实node\r\n  };\r\n  new watcher(\r\n    vm,\r\n    updataComponent,\r\n    () => {\r\n      callHook(vm, 'updated'); //数据更新完成\r\n    },\r\n    true\r\n  ); //处理渲染\r\n  callHook(vm, 'mounted');\r\n}\r\n\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    //vnode变成真实dom\r\n    let vm = this;\r\n    //两个参数，原来的dom，vnode\r\n    //需要区分是首次patch还是更新\r\n    let prevVnode = vm._vnode; //如果首次，值为null\r\n      debugger;\r\n    if (!prevVnode) {\r\n    \r\n      vm.$el = patch(vm.$el, vnode);\r\n      vm._vnode = vnode;\r\n    } else {\r\n      patch(vm._vnode, vnode);\r\n    }\r\n  };\r\n}\r\n\r\n//生命周期调用\r\nexport function callHook(vm, hook) {\r\n  const handlers = vm.$options[hook];\r\n  if (handlers) {\r\n    for (let i = 0; i < handlers.length; i++) {\r\n      handlers[i].call(this);\r\n    }\r\n  }\r\n}\r\n","const attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; //属性匹配 xxx='xxx'\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; //标签的名称(span,div...)\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //<span:xxx></span:xxx>\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //开头标签<span\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //结束标签\r\n\r\n\r\n\r\nexport function  parseHTML(html) {\r\n  let root; //根元素\r\n  let createParent; //当前元素父亲\r\n  let stack = []; //栈\r\n  function createASTElement(tag, attrs) {\r\n    return {\r\n      tag,\r\n      attrs,\r\n      children: [],\r\n      type: 1,\r\n      parent: null,\r\n    };\r\n  }\r\n  //解析html,解析一部分，删除一部分\r\n  function start(startTag, attrs) {\r\n    //开始标签\r\n    let element = createASTElement(startTag, attrs);\r\n    if (!root) {\r\n      root = element;\r\n    }\r\n    createParent = element;\r\n    stack.push(element);\r\n  }\r\n  function charts(text) {\r\n    //文本\r\n    text = text.replace(/s/g, '');\r\n    if (text) {\r\n      createParent.children.push({\r\n        type: 3,\r\n        text,\r\n      });\r\n    }\r\n  }\r\n  function end(endTag) {\r\n    //结束标签\r\n    let element = stack.pop();\r\n    createParent = stack[stack.length - 1];\r\n    if (createParent) {\r\n      element.parent = createParent.tag;\r\n      createParent.children.push(element);\r\n    }\r\n  }\r\n\r\n  //html为空结束\r\n  while (html) {\r\n    let textEnd = html.indexOf('<');\r\n    if (textEnd === 0) {\r\n      //说明是个标签\r\n      //开始标签\r\n      const startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n        continue;\r\n      }\r\n      //结束标签\r\n      let endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length);\r\n        end(endTagMatch[1]);\r\n        continue;\r\n      }\r\n    }\r\n    //文本\r\n    let text;\r\n    if (textEnd > 0) {\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      advance(text.length);\r\n      charts(text);\r\n    }\r\n  }\r\n\r\n  //解析开始标签\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen); //0: \"<div\"1: \"div\"\r\n    if (!start) {\r\n      //不是开始标签，返回\r\n      return;\r\n    }\r\n    let match = {\r\n      tagName: start[1],\r\n      attrs: [],\r\n    };\r\n    //删除已经匹配的节点\r\n    advance(start[0].length);\r\n    //属性处理，多个属性\r\n    let attr;\r\n    let end;\r\n    while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n      match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\r\n      advance(attr[0].length);\r\n    }\r\n    if (end) {\r\n      advance(end[0].length);\r\n      return match;\r\n    }\r\n  }\r\n  function advance(n) {\r\n    html = html.substring(n);\r\n  }\r\n  return root;\r\n}\r\n","//拼接字符串\r\n\r\n//处理attrs和style\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nfunction genProps(attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === 'style') {\r\n      let obj = {};\r\n      attr.value.split(';').forEach((item) => {\r\n        let [key, val] = item.split(':');\r\n        obj[key] = val;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n  }\r\n  return `{${str.slice(0, -1)}}`; //去除最后一个，\r\n}\r\nfunction getChildren(el) {\r\n  let children = el.children;\r\n  if (children) {\r\n    return children.map((child) => gen(child)).join(',');\r\n  }\r\n}\r\nfunction gen(node) {\r\n  //文本(type:3) 元素(type:1)\r\n  if (node.type === 1) {\r\n    //元素\r\n    return generate(node);\r\n  } else {\r\n    //纯文本，两种方式(xxx,{{xxx}})\r\n    let text = node.text;\r\n    if (!defaultTagRE.test(text)) {\r\n      //不是插值\r\n      return `_v(${JSON.stringify(text)})`;\r\n    }\r\n    //解析插值表达式\r\n    let tokens = [];\r\n    //debugger\r\n   let lastIndex = defaultTagRE.lastIndex = 0;\r\n    let match;\r\n    while ((match = defaultTagRE.exec(text))) {\r\n      let index = match.index;\r\n      if (index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n      lastIndex = index + match[0].length;\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n      }\r\n    }\r\n      return `_v(${tokens.join('+')})`;\r\n  }\r\n\r\n}\r\nexport function generate(el) {\r\n  let children = getChildren(el);\r\n  let code = `_c('${el.tag}',${el.attrs.length ? `${genProps(el.attrs)}` : `null`},${children ? `${children}` : 'null'})`;\r\n  return code\r\n}\r\n","import {parseHTML} from './parseAst'\r\nimport {generate} from './generate'\r\n//将html转成ast语法树\r\n// {\r\n//   attrs:[],//属性\r\n//   children:[], //子元素\r\n//   parent:null,\r\n//   tag:''//标签\r\n//   type: 元素类型\r\n// }\r\nexport function compilToFunctions(el) {\r\n  let ast = parseHTML(el);\r\n  //将ast语法树变成render函数，现将语法树变成字符串，在变成render函数\r\n   let code=generate(ast) //code是字符串\r\n   //将render字符串变成函数\r\n   let render=new Function(`with(this){return ${code}}`)\r\n   return render//返回render函数\r\n}\r\n\r\n","import { initState } from './initState';\r\nimport { callHook, mounetComponent } from './vnode/lifecycle';\r\nimport { compilToFunctions } from './compile/index';\r\nimport { mergeOptions } from './utils/index';\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    let vm = this; //this.是vue实例\r\n    vm.$options = options;\r\n    vm.$options = mergeOptions(Vue.options, options); // 合并，会把当前的options和mainx的合并，组成新的options\r\n    callHook(vm, 'beforeCreate');\r\n    //初始化状态\r\n    initState(vm);\r\n    callHook(vm, 'created');\r\n    //渲染模板\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  };\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    let vm = this;\r\n    el = document.querySelector(el);\r\n    vm.$el = el; //挂载元素\r\n    let options = vm.$options;\r\n    //el tempalte render\r\n    if (!options.render) {\r\n      let template = options.template;\r\n      if (!template && el) {\r\n        //获取html\r\n        el = el.outerHTML;\r\n        let render = compilToFunctions(el); //将html变成ast语法树,最后将ast语法树转变成render函数\r\n        options.render = render; //render函数挂载\r\n      }\r\n    }\r\n    mounetComponent(vm, el);\r\n  };\r\n}\r\n","export function renderMixin(Vue) {\r\n  Vue.prototype._c = function () {\r\n    //标签\r\n    //创建标签\r\n    return createElement(...arguments);\r\n  };\r\n  Vue.prototype._v = function (text) {\r\n    //文本\r\n    return createText(text);\r\n  };\r\n  Vue.prototype._s = function (val) {\r\n    //变量\r\n    return val === null ? '' : typeof val === 'object' ? JSON.stringify(val) : val;\r\n  };\r\n\r\n  Vue.prototype._render = function () {\r\n    //将render函数变成vnode\r\n    let vm = this;\r\n    let render = vm.$options.render;\r\n    let vnode = render.call(this);\r\n     return vnode\r\n\r\n  };\r\n}\r\n\r\nfunction createElement( tag, data = {},...children ) {\r\n  return vnode(tag, data, data?.key, children);\r\n}\r\n//创建虚拟dom\r\nfunction vnode(tag, data, key, children, text) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text,\r\n  };\r\n}\r\n//创建文本\r\nfunction createText(text) {\r\n  return vnode(undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\n//render函数样式\r\n//renderh函数里的值也是嵌套的\r\n// (function anonymous() {\r\n//   with (this) {\r\n//     return _c('div', { style: { color: 'red', 'font-size': '12px' }, id: 'app' }, _v('hello ' + _s(name + '333') + ' 111 '), _c('p', null, _v('222')));\r\n//   }\r\n// });\r\n","/**\r\n * mini-vue2源码编写\r\n */\r\nimport { initGlobApi } from './globalApi/index';\r\nimport { initMixin } from './init';\r\nimport { lifecycleMixin } from './vnode/lifecycle';\r\nimport { renderMixin } from './vnode/index';\r\nimport { stateMixin } from './initState';\r\nimport { compilToFunctions } from './compile/index';\r\nimport { createEl, patch } from './vnode/patch';\r\nfunction Vue(options) {\r\n  //初始化\r\n  this._init(options);\r\n}\r\ninitMixin(Vue);\r\nlifecycleMixin(Vue); //添加生命周期\r\nrenderMixin(Vue); //添加_render\r\nstateMixin(Vue); //给实例添加$nextTick\r\n//全局方法\r\ninitGlobApi(Vue);\r\n\r\n// let vm1 = new Vue({ data: { name: 'looper' } });\r\n// let render1 = compilToFunctions(`<ul><li>1</li><li>2</li><li>3</li></ul>`);\r\n// let vnode1 = render1.call(vm1);\r\n// document.body.appendChild(createEl(vnode1));\r\n\r\n// //数据更新\r\n// let vm2 = new Vue({ data: { name: 'zhuo' } });\r\n// let render2 = compilToFunctions(`<ul><li>41</li><li>53</li><li>14</li><`);\r\n// let vnode2 = render2.call(vm2);\r\n// patch(vnode1, vnode2);\r\n\r\n\r\nexport default Vue;\r\n"],"names":["HOOKS","starts","data","parentVal","childVal","forEach","hooks","mergeHook","concat","mergeOptions","parent","child","options","key","mergeField","initGlobApi","Vue","Mixin","mixin","console","log","oldArrayProtoMethods","Array","prototype","ArrayMethods","Object","create","methods","item","_len","arguments","length","args","_key","reault","apply","inserted","splice","ob","__ob__","observerArray","dep","notify","depId","Dep","_classCallCheck","id","subs","_createClass","value","depend","target","addDep","addSub","watcher","push","update","pushTarget","popTarget","observer","_typeof","Observer","defineProperty","enumerable","configurable","isArray","__proto__","walk","keys","i","defineRecative","childDep","get","set","newValue","callback","pengding","flush","cb","timerFunc","Promise","resolve","then","MutationObserver","observe","textNode","document","createTextNode","characterData","textContent","setImmediate","nextTick","watcherId","vm","updateComponent","exprOrfn","user","deps","depsId","Set","getter","path","split","obj","run","oldVal","call","queueWatcher","has","add","queue","pending","flusWacter","initState","ops","$options","initData","watch","initWatch","_loop","handler","createWatcher","_data","proxy","source","stateMixin","$nextTick","$watch","undefined","Watcher","_objectSpread","immediate","patch","oldVnode","vnode","nodeType","el","createEl","parentEL","parentNode","insertBefore","nextsibling","removeChild","tag","replaceChild","text","updateProps","oldChildren","children","newChildren","updateChildren","innerHTML","appendChild","oldProps","newProps","removeAttribute","newStyle","style","oldStyle","styleName","className","setAttribute","createElement","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","isSomeVnode","old","newContent","makeIndexByKey","map","index","moveIndex","moveVnode","mounetComponent","callHook","updataComponent","_update","_render","lifecycleMixin","prevVnode","_vnode","$el","hook","handlers","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","root","createParent","stack","createASTElement","attrs","type","start","startTag","element","charts","replace","end","pop","textEnd","indexOf","startTagMatch","parseStartTag","tagName","endTagMatch","match","advance","substring","attr","name","n","defaultTagRE","genProps","str","_item$split","_item$split2","_slicedToArray","val","JSON","stringify","slice","getChildren","gen","join","node","generate","test","tokens","lastIndex","exec","trim","code","compilToFunctions","ast","render","Function","initMixin","_init","$mount","querySelector","template","outerHTML","renderMixin","_c","_v","createText","_s"],"mappings":";;;;;;EAAO,IAAMA,KAAK,GAAG,CAAC,cAAc,EAAE,SAAS,EAAE,aAAa,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,eAAe,EAAE,WAAW,CAAC,CAAA;;EAEnI;EACA,IAAIC,MAAM,GAAC,EAAE,CAAA;EACbA,MAAM,CAACC,IAAI,GAAC,UAASC,SAAS,EAACC,QAAQ,EAAC;EACtC,EAAA,OAAOA,QAAQ,CAAA;EACjB,CAAC,CAAA;EACD;EACA;EACA;;EAEAJ,KAAK,CAACK,OAAO,CAAC,UAAAC,KAAK,EAAE;EACnBL,EAAAA,MAAM,CAACK,KAAK,CAAC,GAAGC,SAAS,CAAA;EAC3B,CAAC,CAAC,CAAA;EAEF,SAASA,SAASA,CAACJ,SAAS,EAACC,QAAQ,EAAC;EACpC,EAAA,IAAGA,QAAQ,EAAC;EACV,IAAA,IAAGD,SAAS,EAAC;EACX,MAAA,OAAOA,SAAS,CAACK,MAAM,CAACJ,QAAQ,CAAC,CAAA;EACnC,KAAC,MAAI;QACH,OAAO,CAACA,QAAQ,CAAC,CAAA;EACnB,KAAA;EACF,GAAC,MAAI;EACH,IAAA,OAAOD,SAAS,CAAA;EAClB,GAAA;EACF,CAAA;EACO,SAASM,YAAYA,CAACC,MAAM,EAAEC,KAAK,EAAE;IAC1C,IAAMC,OAAO,GAAG,EAAE,CAAA;EAClB;EACA,EAAA,KAAK,IAAIC,GAAG,IAAIH,MAAM,EAAE;MACtBI,UAAU,CAACD,GAAG,CAAC,CAAA;EACjB,GAAA;EACA;EACA,EAAA,KAAK,IAAIA,IAAG,IAAIF,KAAK,EAAE;MACrBG,UAAU,CAACD,IAAG,CAAC,CAAA;EACjB,GAAA;IACA,SAASC,UAAUA,CAACD,GAAG,EAAE;EACvB,IAAA,IAAIZ,MAAM,CAACY,GAAG,CAAC,EAAE;EACfD,MAAAA,OAAO,CAACC,GAAG,CAAC,GAAGZ,MAAM,CAACY,GAAG,CAAC,CAACH,MAAM,CAACG,GAAG,CAAC,EAAEF,KAAK,CAACE,GAAG,CAAC,CAAC,CAAA;EACrD,KAAC,MAAM;EACLD,MAAAA,OAAO,CAACC,GAAG,CAAC,GAAGF,KAAK,CAACE,GAAG,CAAC,CAAA;EAC3B,KAAA;EACF,GAAA;EAEA,EAAA,OAAOD,OAAO,CAAA;EAChB;;EC5CO,SAASG,WAAWA,CAACC,GAAG,EAAC;EAC9B;EACAA,EAAAA,GAAG,CAACJ,OAAO,GAAC,EAAE,CAAA;EACdI,EAAAA,GAAG,CAACC,KAAK,GAAG,UAAUC,KAAK,EAAE;EAC3B;EACF,IAAA,IAAI,CAACN,OAAO,GAAGH,YAAY,CAAC,IAAI,CAACG,OAAO,EAAEM,KAAK,CAAC,CAAC;MAChDC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE,IAAI,CAACR,OAAO,CAAC,CAAA;KACrD,CAAA;EACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECTA;;EAEA;EACA,IAAIS,oBAAoB,GAAGC,KAAK,CAACC,SAAS,CAAA;EAC1C;EACO,IAAMC,YAAY,GAAGC,MAAM,CAACC,MAAM,CAACL,oBAAoB,CAAC,CAAC;;EAEhE;EACA,IAAIM,OAAO,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAA;EAE3DA,OAAO,CAACtB,OAAO,CAAC,UAACuB,IAAI,EAAK;EACxBJ,EAAAA,YAAY,CAACI,IAAI,CAAC,GAAG,YAAmB;EAAA,IAAA,KAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAANC,IAAI,GAAAV,IAAAA,KAAA,CAAAO,IAAA,GAAAI,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA,EAAA,EAAA;EAAJD,MAAAA,IAAI,CAAAC,IAAA,CAAAH,GAAAA,SAAA,CAAAG,IAAA,CAAA,CAAA;EAAA,KAAA;EACpC,IAAA,IAAIC,MAAM,GAAGb,oBAAoB,CAACO,IAAI,CAAC,CAACO,KAAK,CAAC,IAAI,EAAEH,IAAI,CAAC,CAAC;EAC1D,IAAA,IAAII,QAAQ,CAAA;EACZ,IAAA,QAAQR,IAAI;EACV,MAAA,KAAK,MAAM,CAAA;EACX,MAAA,KAAK,SAAS;EACZQ,QAAAA,QAAQ,GAAGJ,IAAI,CAAA;EACf,QAAA,MAAA;EACF,MAAA,KAAK,QAAQ;EACXI,QAAAA,QAAQ,GAAGJ,IAAI,CAACK,MAAM,CAAC,CAAC,CAAC,CAAA;EACxB,QAAA,MAAA;EAAM,KAAA;EAEX,IAAA,IAAIC,EAAE,GAAC,IAAI,CAACC,MAAM,CAAA;EAClB,IAAA,IAAIH,QAAQ,EAAC;EACXE,MAAAA,EAAE,CAACE,aAAa,CAACJ,QAAQ,CAAC,CAAC;EAC7B,KAAA;;EACCE,IAAAA,EAAE,CAACG,GAAG,CAACC,MAAM,EAAE,CAAA;EAChB,IAAA,OAAOR,MAAM,CAAA;KACd,CAAA;EACH,CAAC,CAAC,CAAA;;EAEF;EACA;EACA;;EClCA,IAAIS,KAAK,GAAG,CAAC,CAAA;EACb,IAAaC,GAAG,gBAAA,YAAA;EACd,EAAA,SAAAA,MAAa;EAAAC,IAAAA,eAAA,OAAAD,GAAA,CAAA,CAAA;EACV,IAAA,IAAI,CAACE,EAAE,GAAGH,KAAK,EAAE,CAAA;MAClB,IAAI,CAACI,IAAI,GAAC,EAAE,CAAA;EACd,GAAA;EAACC,EAAAA,YAAA,CAAAJ,GAAA,EAAA,CAAA;MAAA/B,GAAA,EAAA,QAAA;MAAAoC,KAAA,EACD,SAAAC,MAAAA,GAAQ;EACN;EACAN,MAAAA,GAAG,CAACO,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC,CAAA;EACzB,KAAA;EAAC,GAAA,EAAA;MAAAvC,GAAA,EAAA,QAAA;EAAAoC,IAAAA,KAAA,EACD,SAAAI,MAAOC,CAAAA,OAAO,EAAC;EACV,MAAA,IAAI,CAACP,IAAI,CAACQ,IAAI,CAACD,OAAO,CAAC,CAAA;EAC5B,KAAA;EACA;EAAA,GAAA,EAAA;MAAAzC,GAAA,EAAA,QAAA;MAAAoC,KAAA,EACA,SAAAP,MAAAA,GAAQ;EACN,MAAA,IAAI,CAACK,IAAI,CAAC1C,OAAO,CAAC,UAAAiD,OAAO,EAAE;UACzBA,OAAO,CAACE,MAAM,EAAE,CAAA;EAClB,OAAC,CAAC,CAAA;EACJ,KAAA;EAAC,GAAA,CAAA,CAAA,CAAA;EAAA,EAAA,OAAAZ,GAAA,CAAA;EAAA,CAAA,EAAA,CAAA;;EAGH;EACAA,GAAG,CAACO,MAAM,GAAC,IAAI,CAAA;EACR,SAASM,UAAUA,CAACH,OAAO,EAAC;IACjCV,GAAG,CAACO,MAAM,GAACG,OAAO,CAAA;EACpB,CAAA;EAGO,SAASI,SAASA,GAAE;IACzBd,GAAG,CAACO,MAAM,GAAG,IAAI,CAAA;EACnB;;EC5BO,SAASQ,QAAQA,CAACzD,IAAI,EAAE;EAC7B;IACA,IAAI0D,OAAA,CAAO1D,IAAI,CAAA,KAAK,QAAQ,IAAIA,IAAI,KAAK,IAAI,EAAE;EAC7C,IAAA,OAAOA,IAAI,CAAA;EACb,GAAA;EACA,EAAA,OAAO,IAAI2D,QAAQ,CAAC3D,IAAI,CAAC,CAAA;EAC3B,CAAA;EAAC,IAEK2D,QAAQ,gBAAA,YAAA;IACZ,SAAAA,QAAAA,CAAYZ,KAAK,EAAE;EAAAJ,IAAAA,eAAA,OAAAgB,QAAA,CAAA,CAAA;EACjBpC,IAAAA,MAAM,CAACqC,cAAc,CAACb,KAAK,EAAE,QAAQ,EAAE;EACrCc,MAAAA,UAAU,EAAE,KAAK;EACjBC,MAAAA,YAAY,EAAE,KAAK;EAAE;QACrBf,KAAK,EAAE,IAAI;EACb,KAAC,CAAC,CAAA;;EACF,IAAA,IAAI,CAACR,GAAG,GAAG,IAAIG,GAAG,EAAE,CAAC;EACrB;EACA,IAAA,IAAItB,KAAK,CAAC2C,OAAO,CAAChB,KAAK,CAAC,EAAE;EACxBA,MAAAA,KAAK,CAACiB,SAAS,GAAG1C,YAAY,CAAC;EAC/B;EACA,MAAA,IAAI,CAACgB,aAAa,CAACS,KAAK,CAAC,CAAA;EAC3B,KAAC,MAAM;EACL,MAAA,IAAI,CAACkB,IAAI,CAAClB,KAAK,CAAC,CAAC;EACnB,KAAA;EACF,GAAA;EAACD,EAAAA,YAAA,CAAAa,QAAA,EAAA,CAAA;MAAAhD,GAAA,EAAA,MAAA;EAAAoC,IAAAA,KAAA,EAED,SAAAkB,IAAKjE,CAAAA,IAAI,EAAE;QACT,IAAIkE,IAAI,GAAG3C,MAAM,CAAC2C,IAAI,CAAClE,IAAI,CAAC,CAAC;EAC7B,MAAA,KAAK,IAAImE,CAAC,GAAG,CAAC,EAAEtC,MAAM,GAAGqC,IAAI,CAACrC,MAAM,EAAEsC,CAAC,GAAGtC,MAAM,EAAEsC,CAAC,EAAE,EAAE;EACrD;EACA,QAAA,IAAIxD,GAAG,GAAGuD,IAAI,CAACC,CAAC,CAAC,CAAA;EACjB,QAAA,IAAIpB,KAAK,GAAG/C,IAAI,CAACW,GAAG,CAAC,CAAA;EACrByD,QAAAA,cAAc,CAACpE,IAAI,EAAEW,GAAG,EAAEoC,KAAK,CAAC,CAAA;EAClC,OAAA;EACF,KAAA;EACA;EAAA,GAAA,EAAA;MAAApC,GAAA,EAAA,eAAA;EAAAoC,IAAAA,KAAA,EACA,SAAAT,aAAcS,CAAAA,KAAK,EAAE;EACnB,MAAA,IAAIA,KAAK,EAAE;EACT,QAAA,KAAK,IAAIoB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpB,KAAK,CAAClB,MAAM,EAAEsC,CAAC,EAAE,EAAE;EACrCV,UAAAA,QAAQ,CAACV,KAAK,CAACoB,CAAC,CAAC,CAAC,CAAA;EACpB,SAAA;EACF,OAAA;EACF,KAAA;EAAC,GAAA,CAAA,CAAA,CAAA;EAAA,EAAA,OAAAR,QAAA,CAAA;EAAA,CAGH,EAAA,CAAA;EACA,SAASS,cAAcA,CAACpE,IAAI,EAAEW,GAAG,EAAEoC,KAAK,EAAE;EACxC;EACA,EAAA,IAAIsB,QAAQ,GAAGZ,QAAQ,CAACV,KAAK,CAAC,CAAA;EAC9B,EAAA,IAAIR,GAAG,GAAG,IAAIG,GAAG,EAAE,CAAA;EACnBnB,EAAAA,MAAM,CAACqC,cAAc,CAAC5D,IAAI,EAAEW,GAAG,EAAE;MAC/B2D,GAAG,EAAA,SAAAA,MAAG;QACJ,IAAI5B,GAAG,CAACO,MAAM,EAAE;EACdV,QAAAA,GAAG,CAACS,MAAM,EAAE,CAAC;UACb,IAAIqB,QAAQ,CAAC9B,GAAG,EAAE;EAChB8B,UAAAA,QAAQ,CAAC9B,GAAG,CAACS,MAAM,EAAE,CAAC;EACxB,SAAA;EACF,OAAA;;EACA,MAAA,OAAOD,KAAK,CAAA;OACb;MACDwB,GAAG,EAAA,SAAAA,GAACC,CAAAA,QAAQ,EAAE;QACZ,IAAIA,QAAQ,KAAKzB,KAAK,EAAE;EACtB;EACA,QAAA,OAAA;EACF,OAAA;EACAU,MAAAA,QAAQ,CAACe,QAAQ,CAAC,CAAC;EACnBzB,MAAAA,KAAK,GAAGyB,QAAQ,CAAA;EAChBjC,MAAAA,GAAG,CAACC,MAAM,EAAE,CAAC;EACf,KAAA;EACF,GAAC,CAAC,CAAA;EACJ,CAAA;;EAEA;EACA;EACA;EACA;;EC7EA,IAAIiC,QAAQ,GAAG,EAAE,CAAA;EACjB,IAAIC,QAAQ,GAAG,KAAK,CAAA;EACpB,SAASC,KAAKA,GAAG;EACfF,EAAAA,QAAQ,CAACtE,OAAO,CAAC,UAACyE,EAAE,EAAA;EAAA,IAAA,OAAKA,EAAE,EAAE,CAAA;KAAC,CAAA,CAAA;EAC9BF,EAAAA,QAAQ,GAAG,KAAK,CAAA;EAClB,CAAA;EACA,IAAIG,SAAS,CAAA;EACb,IAAIC,OAAO,EAAE;EACX;IACAD,SAAS,GAAG,SAAAA,SAAAA,GAAM;EACfC,IAAAA,OAAO,CAACC,OAAO,EAAE,CAACC,IAAI,CAACL,KAAK,CAAC,CAAA;KAC/B,CAAA;EACH,CAAC,MAAM,IAAIM,gBAAgB,EAAE;EAC3B;EACA,EAAA,IAAIC,OAAO,GAAG,IAAID,gBAAgB,EAAE,CAAA;IACpC,IAAIE,QAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,CAAC,CAAC,CAAC;EAC1CH,EAAAA,OAAO,CAACA,OAAO,CAACC,QAAQ,EAAE;EAAEG,IAAAA,aAAa,EAAE,IAAA;KAAM,CAAC,CAAC;IACnDT,SAAS,GAAG,SAAAA,SAAAA,GAAM;MAChBM,QAAQ,CAACI,WAAW,GAAG,CAAC,CAAA;KACzB,CAAA;EACH,CAAC,MAAM,IAAIC,YAAY,EAAE;IACvBX,SAAS,GAAG,SAAAA,SAAAA,GAAM;MAChBW,YAAY,CAACb,KAAK,CAAC,CAAA;KACpB,CAAA;EACH,CAAA;EACO,SAASc,QAAQA,CAACb,EAAE,EAAE;EAC3B;EACA;EACAH,EAAAA,QAAQ,CAACpB,IAAI,CAACuB,EAAE,CAAC,CAAC;IAClB,IAAI,CAACF,QAAQ,EAAE;EACbA,IAAAA,QAAQ,GAAG,IAAI,CAAA;EACdG,IAAAA,SAAS,EAAE,CAAA;EACd,GAAA;EACF;;EC/BA;EACA,IAAIa,SAAS,GAAG,CAAC,CAAA;EACjB,IAAatC,OAAO,gBAAA,YAAA;IAClB,SAAAA,OAAAA,CAAYuC,EAAE,EAAEC,eAAe,EAAEhB,EAAE,EAAElE,OAAO,EAAE;EAAAiC,IAAAA,eAAA,OAAAS,OAAA,CAAA,CAAA;MAC5C,IAAI,CAACuC,EAAE,GAAGA,EAAE,CAAA;MACZ,IAAI,CAACE,QAAQ,GAAGD,eAAe,CAAA;MAC/B,IAAI,CAAChB,EAAE,GAAGA,EAAE,CAAA;EACZ,IAAA,IAAI,CAACkB,IAAI,GAAC,CAAC,CAACpF,OAAO,CAACoF,IAAI,CAAA;MACxB,IAAI,CAACpF,OAAO,GAAGA,OAAO,CAAA;MACtB,IAAI,CAACqF,IAAI,GAAG,EAAE,CAAA;EACd,IAAA,IAAI,CAACC,MAAM,GAAG,IAAIC,GAAG,EAAE,CAAA;EACvB,IAAA,IAAI,CAACrD,EAAE,GAAG8C,SAAS,EAAE,CAAC;EACtB,IAAA,IAAI,OAAOE,eAAe,KAAK,UAAU,EAAE;EACzC,MAAA,IAAI,CAACM,MAAM,GAAGN,eAAe,CAAC;EAChC,KAAC,MAAM;EACL;QACA,IAAI,CAACM,MAAM,GAAG,YAAY;UACxB,IAAIC,IAAI,GAAG,IAAI,CAACN,QAAQ,CAACO,KAAK,CAAC,GAAG,CAAC,CAAA;UACnC,IAAIC,GAAG,GAAGV,EAAE,CAAA;EACZ,QAAA,KAAK,IAAIxB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgC,IAAI,CAACtE,MAAM,EAAEsC,CAAC,EAAE,EAAE;EACpCkC,UAAAA,GAAG,GAAGA,GAAG,CAACF,IAAI,CAAChC,CAAC,CAAC,CAAC,CAAA;EACpB,SAAA;EACA,QAAA,OAAOkC,GAAG,CAAA;SACX,CAAA;EACH,KAAA;EACA;MACD,IAAI,CAACtD,KAAK,GAAG,IAAI,CAACuB,GAAG,EAAE,CAAC;EACzB,GAAA;EAACxB,EAAAA,YAAA,CAAAM,OAAA,EAAA,CAAA;MAAAzC,GAAA,EAAA,KAAA;MAAAoC,KAAA,EACD,SAAAuD,GAAAA,GAAM;EACJ,MAAA,IAAIvD,KAAK,GAAC,IAAI,CAACuB,GAAG,EAAE,CAAA;EACpB,MAAA,IAAIiC,MAAM,GAAC,IAAI,CAACxD,KAAK,CAAA;QACrB,IAAI,CAACA,KAAK,GAACA,KAAK,CAAA;EAChB;QACA,IAAG,IAAI,CAAC+C,IAAI,EAAC;EACT,QAAA,IAAI,CAAClB,EAAE,CAAC4B,IAAI,CAAC,IAAI,CAACb,EAAE,EAAC5C,KAAK,EAACwD,MAAM,CAAC,CAAA;EACtC,OAAA;EACF,KAAA;EAAC,GAAA,EAAA;MAAA5F,GAAA,EAAA,KAAA;MAAAoC,KAAA,EACD,SAAAuB,GAAAA,GAAM;EACJf,MAAAA,UAAU,CAAC,IAAI,CAAC,CAAC;EACjB,MAAA,IAAMR,KAAK,GAAE,IAAI,CAACmD,MAAM,EAAE,CAAC;QAC3B1C,SAAS,EAAE,CAAC;EACZ,MAAA,OAAOT,KAAK,CAAA;EACd,KAAA;EACA;EAAA,GAAA,EAAA;MAAApC,GAAA,EAAA,QAAA;MAAAoC,KAAA,EACA,SAAAO,MAAAA,GAAS;EACP;QACAmD,YAAY,CAAC,IAAI,CAAC,CAAA;EACpB,KAAA;EAAC,GAAA,EAAA;MAAA9F,GAAA,EAAA,QAAA;EAAAoC,IAAAA,KAAA,EACD,SAAAG,MAAOX,CAAAA,GAAG,EAAE;EACV;EACA,MAAA,IAAIK,EAAE,GAAGL,GAAG,CAACK,EAAE,CAAA;QACf,IAAI,CAAC,IAAI,CAACoD,MAAM,CAACU,GAAG,CAAC9D,EAAE,CAAC,EAAE;EACxB,QAAA,IAAI,CAACmD,IAAI,CAAC1C,IAAI,CAACd,GAAG,CAAC,CAAA;EACnB,QAAA,IAAI,CAACyD,MAAM,CAACW,GAAG,CAAC/D,EAAE,CAAC,CAAA;EACnBL,QAAAA,GAAG,CAACY,MAAM,CAAC,IAAI,CAAC,CAAA;EAClB,OAAA;EACF,KAAA;EAAC,GAAA,CAAA,CAAA,CAAA;EAAA,EAAA,OAAAC,OAAA,CAAA;EAAA,CAAA,EAAA,CAAA;EAEH,IAAIwD,KAAK,GAAG,EAAE,CAAC;EACf,IAAIF,GAAG,GAAG,EAAE,CAAA;EACZ,IAAIG,OAAO,GAAG,KAAK,CAAA;EACnB,SAASC,UAAUA,GAAG;EACpBF,EAAAA,KAAK,CAACzG,OAAO,CAAC,UAACuB,IAAI,EAAK;MACtBA,IAAI,CAAC4E,GAAG,EAAE,CAAA;EACZ,GAAC,CAAC,CAAA;EACFM,EAAAA,KAAK,GAAG,EAAE,CAAA;IACVF,GAAG,GAAG,EAAE,CAAA;EACRG,EAAAA,OAAO,GAAG,KAAK,CAAA;EACjB,CAAA;EACA,SAASJ,YAAYA,CAACrD,OAAO,EAAE;EAC7B;EACA,EAAA,IAAIR,EAAE,GAAGQ,OAAO,CAACR,EAAE,CAAA;EACnB;EACA,EAAA,IAAI,CAAC8D,GAAG,CAAC9D,EAAE,CAAC,EAAE;EACZ;EACAgE,IAAAA,KAAK,CAACvD,IAAI,CAACD,OAAO,CAAC,CAAA;EACnBsD,IAAAA,GAAG,CAAC9D,EAAE,CAAC,GAAG,IAAI,CAAA;MACd,IAAI,CAACiE,OAAO,EAAE;EACZpB,MAAAA,QAAQ,CAACqB,UAAU,CAAC,CAAC;EACvB,KAAA;;EACAD,IAAAA,OAAO,GAAG,IAAI,CAAA;EAChB,GAAA;EACF,CAAA;;EAEA;EACA;EACA;;EAEA;;ECtFO,SAASE,SAASA,CAACpB,EAAE,EAAE;EAC5B,EAAA,IAAIqB,GAAG,GAAGrB,EAAE,CAACsB,QAAQ,CAAA;EACrB;EACA;EACA;IACA,IAAID,GAAG,CAAChH,IAAI,EAAE;MACZkH,QAAQ,CAACvB,EAAE,CAAC,CAAA;EACd,GAAA;IACA,IAAIqB,GAAG,CAACG,KAAK,EAAE;MACbC,SAAS,CAACzB,EAAE,CAAC,CAAA;EACf,GAAA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACF,CAAA;;EAEA;EACA,SAASyB,SAASA,CAACzB,EAAE,EAAE;EACrB,EAAA,IAAIwB,KAAK,GAAGxB,EAAE,CAACsB,QAAQ,CAACE,KAAK,CAAA;EAAC,EAAA,IAAAE,KAAA,GAAA,SAAAA,KAAA1G,CAAAA,GAAA,EACP;EACrB,IAAA,IAAI2G,OAAO,GAAGH,KAAK,CAACxG,GAAG,CAAC,CAAA;EACxB,IAAA,IAAIS,KAAK,CAAC2C,OAAO,CAACuD,OAAO,CAAC,EAAE;EAC1B;EACAA,MAAAA,OAAO,CAACnH,OAAO,CAAC,UAACuB,IAAI,EAAK;EACxB6F,QAAAA,aAAa,CAAC5B,EAAE,EAAEhF,GAAG,EAAEe,IAAI,CAAC,CAAA;EAC9B,OAAC,CAAC,CAAA;EACJ,KAAC,MAAM;EACL;EACA6F,MAAAA,aAAa,CAAC5B,EAAE,EAAEhF,GAAG,EAAE2G,OAAO,CAAC,CAAA;EACjC,KAAA;KACD,CAAA;IAXD,KAAK,IAAI3G,GAAG,IAAIwG,KAAK,EAAA;EAAAE,IAAAA,KAAA,CAAA1G,GAAA,CAAA,CAAA;EAAA,GAAA;EAYvB,CAAA;EACA;EACA,SAASuG,QAAQA,CAACvB,EAAE,EAAE;IACpB,IAAI3F,IAAI,GAAG2F,EAAE,CAACsB,QAAQ,CAACjH,IAAI,CAAC;EAC5BA,EAAAA,IAAI,GAAG2F,EAAE,CAAC6B,KAAK,GAAG,OAAOxH,IAAI,KAAK,UAAU,GAAGA,IAAI,CAACwG,IAAI,CAACb,EAAE,CAAC,GAAG3F,IAAI,CAAC;EACpE;EACA,EAAA,KAAK,IAAIW,GAAG,IAAIX,IAAI,EAAE;EACpByH,IAAAA,KAAK,CAAC9B,EAAE,EAAE,OAAO,EAAEhF,GAAG,CAAC,CAAA;EACzB,GAAA;EACA;IACA8C,QAAQ,CAACzD,IAAI,CAAC,CAAA;EAChB,CAAA;EAEA,SAASyH,KAAKA,CAAC9B,EAAE,EAAE+B,MAAM,EAAE/G,GAAG,EAAE;EAC9BY,EAAAA,MAAM,CAACqC,cAAc,CAAC+B,EAAE,EAAEhF,GAAG,EAAE;MAC7B2D,GAAG,EAAA,SAAAA,MAAG;EACJ,MAAA,OAAOqB,EAAE,CAAC+B,MAAM,CAAC,CAAC/G,GAAG,CAAC,CAAA;OACvB;MACD4D,GAAG,EAAA,SAAAA,GAACC,CAAAA,QAAQ,EAAE;EACZmB,MAAAA,EAAE,CAAC+B,MAAM,CAAC,CAAC/G,GAAG,CAAC,GAAG6D,QAAQ,CAAA;EAC5B,KAAA;EACF,GAAC,CAAC,CAAA;EACJ,CAAA;EAEO,SAASmD,UAAUA,CAAChC,EAAE,EAAE;EAC7BA,EAAAA,EAAE,CAACtE,SAAS,CAACuG,SAAS,GAAG,UAAUhD,EAAE,EAAE;EACrC;MACA,OAAOa,QAAQ,CAACb,EAAE,CAAC,CAAA;KACpB,CAAA;EACD;IACAe,EAAE,CAACtE,SAAS,CAACwG,MAAM,GAAG,UAAU/G,GAAG,EAAC+E,QAAQ,EAAEyB,OAAO,EAAc;EAAA,IAAA,IAAZ5G,OAAO,GAAAkB,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAkG,SAAA,GAAAlG,SAAA,CAAA,CAAA,CAAA,GAAC,EAAE,CAAA;EAC/D;EACC,IAAc,IAAImG,OAAO,CAACjH,GAAG,EAAE+E,QAAQ,EAAEyB,OAAO,EAAAU,cAAA,CAAAA,cAAA,KAAMtH,OAAO,CAAA,EAAA,EAAA,EAAA;EAACoF,MAAAA,IAAI,EAAC,IAAA;OAAM,CAAA,EAAA;MACzE,IAAGpF,OAAO,CAACuH,SAAS,EAAC;EAAC;EACrBX,MAAAA,OAAO,CAACd,IAAI,CAACb,EAAE,CAAC,CAAA;EACjB,KAAA;KACF,CAAA;EACH,CAAA;;EAEA;EACA;;EAEA,SAAS4B,aAAaA,CAAC5B,EAAE,EAAEE,QAAQ,EAAEyB,OAAO,EAAE5G,OAAO,EAAE;EACrD;EACA,EAAA,IAAIgD,OAAA,CAAO4D,OAAO,CAAA,KAAK,QAAQ,EAAE;EAC/B5G,IAAAA,OAAO,GAAG4G,OAAO,CAAA;MACjBA,OAAO,GAAGA,OAAO,CAACA,OAAO,CAAA;EAC3B,GAAA;EACA,EAAA,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;EAC/BA,IAAAA,OAAO,GAAG3B,EAAE,CAAC2B,OAAO,CAAC,CAAA;EACvB,GAAA;IAEA,OAAO3B,EAAE,CAACkC,MAAM,CAAClC,EAAE,EAACE,QAAQ,EAAEyB,OAAO,EAAE5G,OAAO,CAAC,CAAA;EACjD;;EC5FO,SAASwH,KAAKA,CAACC,QAAQ,EAAEC,KAAK,EAAE;EACrC;EACA,EAAA,IAAID,QAAQ,CAACE,QAAQ,KAAK,CAAC,EAAE;EAC3B,IAAA,IAAIC,EAAE,GAAGC,QAAQ,CAACH,KAAK,CAAC,CAAA;EACxB;EACA,IAAA,IAAII,QAAQ,GAAGL,QAAQ,CAACM,UAAU,CAAC;MACnCD,QAAQ,CAACE,YAAY,CAACJ,EAAE,EAAEH,QAAQ,CAACQ,WAAW,CAAC,CAAA;EAC/CH,IAAAA,QAAQ,CAACI,WAAW,CAACT,QAAQ,CAAC,CAAA;EAC9B,IAAA,OAAOG,EAAE,CAAA;EACX,GAAC,MAAM;EACL;EACA,IAAA,IAAIH,QAAQ,CAACU,GAAG,KAAKT,KAAK,CAACS,GAAG,EAAE;EAC9BV,MAAAA,QAAQ,CAACG,EAAE,CAACG,UAAU,CAACK,YAAY,CAACP,QAAQ,CAACH,KAAK,CAAC,EAAED,QAAQ,CAACG,EAAE,CAAC,CAAA;EACnE,KAAA;;EAEA;EACA,IAAA,IAAI,CAACH,QAAQ,CAACU,GAAG,EAAE;EACjB,MAAA,IAAIV,QAAQ,CAACY,IAAI,KAAKX,KAAK,CAACW,IAAI,EAAE;UAChC,OAAQZ,QAAQ,CAACG,EAAE,CAAC/C,WAAW,GAAG6C,KAAK,CAACW,IAAI,CAAA;EAC9C,OAAA;EACF,KAAA;EACA;EACAX,IAAAA,KAAK,CAACE,EAAE,GAAGH,QAAQ,CAACG,EAAE,CAAA;EACtB,IAAA,IAAIA,GAAE,GAAGF,KAAK,CAACE,EAAE,CAAA;MACjBU,WAAW,CAACZ,KAAK,EAAED,QAAQ,CAACnI,IAAI,IAAI,EAAE,CAAC,CAAA;;EAEvC;EACA,IAAA,IAAIiJ,WAAW,GAAGd,QAAQ,CAACe,QAAQ,IAAI,EAAE,CAAA;EACzC,IAAA,IAAIC,WAAW,GAAGf,KAAK,CAACc,QAAQ,IAAI,EAAE,CAAA;EACtC;EACA,IAAA,IAAID,WAAW,CAACpH,MAAM,IAAIsH,WAAW,CAACtH,MAAM,EAAE;EAC5CuH,MAAAA,cAAc,CAACH,WAAW,EAAEE,WAAW,EAAEb,GAAE,CAAC,CAAA;EAC9C,KAAC,MAAM,IAAIW,WAAW,CAACpH,MAAM,EAAE;EAC7B;QACAyG,GAAE,CAACe,SAAS,GAAG,EAAE,CAAA;EACnB,KAAC,MAAM,IAAIF,WAAW,CAACtH,MAAM,EAAE;EAC7B;EACA,MAAA,KAAK,IAAIsC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgF,WAAW,CAACtH,MAAM,EAAEsC,CAAC,EAAE,EAAE;EAC3C,QAAA,IAAI1D,KAAK,GAAG0I,WAAW,CAAChF,CAAC,CAAC,CAAA;EAC1B;EACAmE,QAAAA,GAAE,CAACgB,WAAW,CAACf,QAAQ,CAAC9H,KAAK,CAAC,CAAC,CAAA;EACjC,OAAA;EACF,KAAA;EACF,GAAA;EACF,CAAA;;EAEA;EACA,SAASuI,WAAWA,CAACZ,KAAK,EAAiB;EAAA,EAAA,IAAfmB,QAAQ,GAAA3H,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAkG,SAAA,GAAAlG,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;EACvC,EAAA,IAAI4H,QAAQ,GAAGpB,KAAK,CAACpI,IAAI,IAAI,EAAE,CAAA;EAC/B,EAAA,IAAIsI,EAAE,GAAGF,KAAK,CAACE,EAAE,CAAC;;EAElB;EACA,EAAA,KAAK,IAAI3H,GAAG,IAAI4I,QAAQ,EAAE;EACxB,IAAA,IAAI,CAACC,QAAQ,CAAC7I,GAAG,CAAC,EAAE;EAClB2H,MAAAA,EAAE,CAACmB,eAAe,CAAC9I,GAAG,CAAC,CAAA;EACzB,KAAA;EACF,GAAA;EACA;EACA,EAAA,IAAI+I,QAAQ,GAAGF,QAAQ,CAACG,KAAK,IAAI,EAAE,CAAA;EACnC,EAAA,IAAIC,QAAQ,GAAGL,QAAQ,CAACI,KAAK,IAAI,EAAE,CAAA;EACnC,EAAA,KAAK,IAAIhJ,IAAG,IAAIiJ,QAAQ,EAAE;EACxB,IAAA,IAAI,CAACF,QAAQ,CAAC/I,IAAG,CAAC,EAAE;QAClB2H,EAAE,CAACqB,KAAK,GAAG,EAAE,CAAA;EACf,KAAA;EACF,GAAA;EAEA,EAAA,KAAK,IAAIhJ,KAAG,IAAI6I,QAAQ,EAAE;MACxB,IAAI7I,KAAG,KAAK,OAAO,EAAE;EACnB;EACA,MAAA,KAAK,IAAIkJ,SAAS,IAAIL,QAAQ,CAACG,KAAK,EAAE;UACpCrB,EAAE,CAACqB,KAAK,CAACE,SAAS,CAAC,GAAGL,QAAQ,CAACG,KAAK,CAACE,SAAS,CAAC,CAAA;EACjD,OAAA;EACF,KAAC,MAAM,IAAIlJ,KAAG,KAAK,OAAO,EAAE;EAC1B2H,MAAAA,EAAE,CAACwB,SAAS,GAAGN,QAAQ,CAAM,OAAA,CAAA,CAAA;EAC/B,KAAC,MAAM;QACLlB,EAAE,CAACyB,YAAY,CAACpJ,KAAG,EAAE6I,QAAQ,CAAC7I,KAAG,CAAC,CAAC,CAAA;EACrC,KAAA;EACF,GAAA;EACF,CAAA;;EAEA;EACO,SAAS4H,QAAQA,CAACH,KAAK,EAAE;EAC9B;EACA,EAAA,IAAMS,GAAG,GAAgCT,KAAK,CAAxCS,GAAG,CAAA;MAAEK,QAAQ,GAAsBd,KAAK,CAAnCc,QAAQ,CAAA;MAAsBd,KAAK,CAAzBzH,GAAG,CAAA;MAAiByH,KAAK,CAApBpI,IAAI,CAAA;UAAE+I,IAAI,GAAKX,KAAK,CAAdW,KAAI;EACpC,EAAA,IAAI,OAAOF,GAAG,KAAK,QAAQ,EAAE;EAC3B;MACAT,KAAK,CAACE,EAAE,GAAGlD,QAAQ,CAAC4E,aAAa,CAACnB,GAAG,CAAC,CAAC;EACvCG,IAAAA,WAAW,CAACZ,KAAK,CAAC,CAAC;MACnB,IAAIc,QAAQ,CAACrH,MAAM,EAAE;EACnBqH,MAAAA,QAAQ,CAAC/I,OAAO,CAAC,UAACM,KAAK,EAAK;EAC1B,QAAA,IAAIA,KAAK,EAAE;YACT2H,KAAK,CAACE,EAAE,CAACgB,WAAW,CAACf,QAAQ,CAAC9H,KAAK,CAAC,CAAC,CAAA;EACvC,SAAA;EACF,OAAC,CAAC,CAAA;EACJ,KAAA;EACF,GAAC,MAAM;EACL;MACA2H,KAAK,CAACE,EAAE,GAAGlD,QAAQ,CAACC,cAAc,CAAC0D,IAAI,CAAC,CAAA;EAC1C,GAAA;IACA,OAAOX,KAAK,CAACE,EAAE,CAAA;EACjB,CAAA;;EAEA;EACA,SAASc,cAAcA,CAACH,WAAW,EAAEE,WAAW,EAAE3I,MAAM,EAAE;EACxD;EACA,EAAA,IAAIyJ,aAAa,GAAG,CAAC,CAAC;EACtB,EAAA,IAAIC,aAAa,GAAGjB,WAAW,CAACgB,aAAa,CAAC,CAAC;IAC/C,IAAIE,WAAW,GAAGlB,WAAW,CAACpH,MAAM,GAAG,CAAC,CAAC;EACzC,EAAA,IAAIuI,WAAW,GAAGnB,WAAW,CAACkB,WAAW,CAAC,CAAC;;EAE3C,EAAA,IAAIE,aAAa,GAAG,CAAC,CAAC;EACtB,EAAA,IAAIC,aAAa,GAAGnB,WAAW,CAACkB,aAAa,CAAC,CAAC;IAC/C,IAAIE,WAAW,GAAGpB,WAAW,CAACtH,MAAM,GAAG,CAAC,CAAC;EACzC,EAAA,IAAI2I,WAAW,GAAGrB,WAAW,CAACoB,WAAW,CAAC,CAAC;EAC3C;EACA,EAAA,SAASE,WAAWA,CAACC,GAAG,EAAEC,UAAU,EAAE;EACpC,IAAA,OAAOD,GAAG,CAAC7B,GAAG,KAAK8B,UAAU,CAAC9B,GAAG,IAAI6B,GAAG,CAAC/J,GAAG,KAAKgK,UAAU,CAAChK,GAAG,CAAA;EACjE,GAAA;IACA,SAASiK,cAAcA,CAAC1B,QAAQ,EAAE;MAChC,IAAI2B,GAAG,GAAG,EAET,CAAA;EACD3B,IAAAA,QAAQ,CAAC/I,OAAO,CAAC,UAACuB,IAAI,EAACoJ,KAAK,EAAG;QAC7B,IAAGpJ,IAAI,CAACf,GAAG,EAAC;EACVkK,QAAAA,GAAG,CAACnJ,IAAI,CAACf,GAAG,CAAC,GAACmK,KAAK,CAAA;EACrB,OAAA;EACF,KAAC,CAAC,CAAA;EACF,IAAA,OAAOD,GAAG,CAAA;EACZ,GAAA;EACA,EAAA,IAAIA,GAAG,GAACD,cAAc,CAAC3B,WAAW,CAAC,CAAC;EACpC,EAAA,OAAOgB,aAAa,IAAIE,WAAW,IAAIE,aAAa,IAAIE,WAAW,EAAE;EACnE;EACA,IAAA,IAAIE,WAAW,CAACP,aAAa,EAAEI,aAAa,CAAC,EAAE;EAC7C;EACA;EACApC,MAAAA,KAAK,CAACgC,aAAa,EAAEI,aAAa,CAAC,CAAA;EACnC;EACAJ,MAAAA,aAAa,GAAGjB,WAAW,CAAC,EAAEgB,aAAa,CAAC,CAAA;EAC5CK,MAAAA,aAAa,GAAGnB,WAAW,CAAC,EAAEkB,aAAa,CAAC,CAAA;EAC9C,KAAC,MAAM,IAAkBG,WAAW,EAAG;EACrC;EACAtC,MAAAA,KAAK,CAACkC,WAAW,EAAEI,WAAW,CAAC,CAAA;EAC/BJ,MAAAA,WAAW,GAAGnB,WAAW,CAAC,EAAEkB,WAAW,CAAC,CAAA;EACxCK,MAAAA,WAAW,GAAGrB,WAAW,CAAC,EAAEoB,WAAW,CAAC,CAAA;OACzC,MAAM,IAAIE,WAAW,CAACP,aAAa,EAAEM,WAAW,CAAC,EAAE;EAClD;EACAtC,MAAAA,KAAK,CAACgC,aAAa,EAAEM,WAAW,CAAC,CAAA;EACjCN,MAAAA,aAAa,GAAGjB,WAAW,CAAC,EAAEgB,aAAa,CAAC,CAAA;EAC5CO,MAAAA,WAAW,GAAGrB,WAAW,CAAC,EAAEoB,WAAW,CAAC,CAAA;OACzC,MAAM,IAAIE,WAAW,CAACL,WAAW,EAAEE,aAAa,CAAC,EAAE;EAClD;EACApC,MAAAA,KAAK,CAACkC,WAAW,EAAEE,aAAa,CAAC,CAAA;EACjCF,MAAAA,WAAW,GAAGnB,WAAW,CAAC,EAAEkB,WAAW,CAAC,CAAA;EACxCG,MAAAA,aAAa,GAAGnB,WAAW,CAAC,EAAEkB,aAAa,CAAC,CAAA;EAC9C,KAAC,MAAM;EACL;EACA;EACA,MAAA,IAAIU,SAAS,GAACF,GAAG,CAACP,aAAa,CAAC3J,GAAG,CAAC,CAAA;QACpC,IAAG,CAACoK,SAAS,EAAC;EAAC;EACbvK,QAAAA,MAAM,CAACkI,YAAY,CAACH,QAAQ,CAAC+B,aAAa,CAAC,EAACJ,aAAa,CAAC5B,EAAE,CAAC,CAAC;EAChE,OAAC,MAAI;EAAC;EACJ,QAAA,IAAI0C,SAAS,GAAC/B,WAAW,CAAC8B,SAAS,CAAC,CAAA;EACpC9B,QAAAA,WAAW,CAAC8B,SAAS,CAAC,GAAC,IAAI,CAAA;UAC3BvK,MAAM,CAACkI,YAAY,CAACsC,SAAS,CAAC1C,EAAE,EAAE4B,aAAa,CAAC5B,EAAE,CAAC,CAAC;EACpDJ,QAAAA,KAAK,CAAC8C,SAAS,EAACR,WAAW,CAAC,CAAA;EAC9B,OAAA;EACA;EACAF,MAAAA,aAAa,GAACnB,WAAW,CAACoB,WAAW,EAAE,CAAC,CAAA;EAE1C,KAAA;EAGF,GAAA;;EAEA;IACA,IAAIF,aAAa,IAAIE,WAAW,EAAE;MAChC,KAAK,IAAIpG,CAAC,GAAGkG,aAAa,EAAElG,CAAC,IAAIoG,WAAW,EAAEpG,CAAC,EAAE,EAAE;QACjD3D,MAAM,CAAC8I,WAAW,CAACf,QAAQ,CAACY,WAAW,CAAChF,CAAC,CAAC,CAAC,CAAC,CAAA;EAC9C,KAAA;EACF,GAAA;EACA;IACE,IAAI8F,aAAa,IAAIE,WAAW,EAAE;MAChC,KAAK,IAAIhG,EAAC,GAAG8F,aAAa,EAAE9F,EAAC,IAAIgG,WAAW,EAAEhG,EAAC,EAAE,EAAE;EACjD,MAAA,IAAI1D,KAAK,GAACwI,WAAW,CAAC9E,EAAC,CAAC,CAAA;QACxB,IAAG,CAAC1D,KAAK,EAAC;EACTD,QAAAA,MAAM,CAAC8I,WAAW,CAAC7I,KAAK,CAAC6H,EAAE,CAAC,CAAA;EAC7B,OAAA;EAEF,KAAA;EACF,GAAA;EACJ;;EC5LO,SAAS2C,eAAeA,CAACtF,EAAE,EAAE2C,EAAE,EAAE;EACtC4C,EAAAA,QAAQ,CAACvF,EAAE,EAAE,eAAe,CAAC,CAAA;EAC7B,EAAA,IAAIwF,eAAe,GAAG,SAAlBA,eAAeA,GAAS;MAC1BxF,EAAE,CAACyF,OAAO,CAACzF,EAAE,CAAC0F,OAAO,EAAE,CAAC,CAAC;KAC1B,CAAA;;EACD,EAAA,IAAIjI,OAAO,CACTuC,EAAE,EACFwF,eAAe,EACf,YAAM;EACJD,IAAAA,QAAQ,CAACvF,EAAE,EAAE,SAAS,CAAC,CAAC;EAC1B,GAAC,EACD,IAAI,CACL,CAAC;EACFuF,EAAAA,QAAQ,CAACvF,EAAE,EAAE,SAAS,CAAC,CAAA;EACzB,CAAA;EAEO,SAAS2F,cAAcA,CAACxK,GAAG,EAAE;EAClCA,EAAAA,GAAG,CAACO,SAAS,CAAC+J,OAAO,GAAG,UAAUhD,KAAK,EAAE;EACvC;MACA,IAAIzC,EAAE,GAAG,IAAI,CAAA;EACb;EACA;EACA,IAAA,IAAI4F,SAAS,GAAG5F,EAAE,CAAC6F,MAAM,CAAC;EACxB,IAAA,SAAA;MACF,IAAI,CAACD,SAAS,EAAE;QAEd5F,EAAE,CAAC8F,GAAG,GAAGvD,KAAK,CAACvC,EAAE,CAAC8F,GAAG,EAAErD,KAAK,CAAC,CAAA;QAC7BzC,EAAE,CAAC6F,MAAM,GAAGpD,KAAK,CAAA;EACnB,KAAC,MAAM;EACLF,MAAAA,KAAK,CAACvC,EAAE,CAAC6F,MAAM,EAAEpD,KAAK,CAAC,CAAA;EACzB,KAAA;KACD,CAAA;EACH,CAAA;;EAEA;EACO,SAAS8C,QAAQA,CAACvF,EAAE,EAAE+F,IAAI,EAAE;EACjC,EAAA,IAAMC,QAAQ,GAAGhG,EAAE,CAACsB,QAAQ,CAACyE,IAAI,CAAC,CAAA;EAClC,EAAA,IAAIC,QAAQ,EAAE;EACZ,IAAA,KAAK,IAAIxH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwH,QAAQ,CAAC9J,MAAM,EAAEsC,CAAC,EAAE,EAAE;EACxCwH,MAAAA,QAAQ,CAACxH,CAAC,CAAC,CAACqC,IAAI,CAAC,IAAI,CAAC,CAAA;EACxB,KAAA;EACF,GAAA;EACF;;EC5CA,IAAMoF,SAAS,GAAG,2EAA2E,CAAC;EAC9F,IAAMC,MAAM,GAAiC,8BAAA,CAAC;EAC9C,IAAMC,YAAY,GAAAxL,MAAAA,CAAAA,MAAA,CAAUuL,MAAM,EAAAvL,OAAAA,CAAAA,CAAAA,MAAA,CAAQuL,MAAM,EAAG,GAAA,CAAA,CAAC;EACpD,IAAME,YAAY,GAAG,IAAIC,MAAM,CAAA,IAAA,CAAA1L,MAAA,CAAMwL,YAAY,CAAG,CAAA,CAAC;EACrD,IAAMG,aAAa,GAAG,YAAY,CAAA;EAClC,IAAMC,MAAM,GAAG,IAAIF,MAAM,CAAA,OAAA,CAAA1L,MAAA,CAASwL,YAAY,EAAS,QAAA,CAAA,CAAA,CAAC;;EAIjD,SAAUK,SAASA,CAACC,IAAI,EAAE;IAC/B,IAAIC,IAAI,CAAC;IACT,IAAIC,YAAY,CAAC;EACjB,EAAA,IAAIC,KAAK,GAAG,EAAE,CAAC;EACf,EAAA,SAASC,gBAAgBA,CAAC3D,GAAG,EAAE4D,KAAK,EAAE;MACpC,OAAO;EACL5D,MAAAA,GAAG,EAAHA,GAAG;EACH4D,MAAAA,KAAK,EAALA,KAAK;EACLvD,MAAAA,QAAQ,EAAE,EAAE;EACZwD,MAAAA,IAAI,EAAE,CAAC;EACPlM,MAAAA,MAAM,EAAE,IAAA;OACT,CAAA;EACH,GAAA;EACA;EACA,EAAA,SAASmM,KAAKA,CAACC,QAAQ,EAAEH,KAAK,EAAE;EAC9B;EACA,IAAA,IAAII,OAAO,GAAGL,gBAAgB,CAACI,QAAQ,EAAEH,KAAK,CAAC,CAAA;MAC/C,IAAI,CAACJ,IAAI,EAAE;EACTA,MAAAA,IAAI,GAAGQ,OAAO,CAAA;EAChB,KAAA;EACAP,IAAAA,YAAY,GAAGO,OAAO,CAAA;EACtBN,IAAAA,KAAK,CAAClJ,IAAI,CAACwJ,OAAO,CAAC,CAAA;EACrB,GAAA;IACA,SAASC,MAAMA,CAAC/D,IAAI,EAAE;EACpB;MACAA,IAAI,GAAGA,IAAI,CAACgE,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;EAC7B,IAAA,IAAIhE,IAAI,EAAE;EACRuD,MAAAA,YAAY,CAACpD,QAAQ,CAAC7F,IAAI,CAAC;EACzBqJ,QAAAA,IAAI,EAAE,CAAC;EACP3D,QAAAA,IAAI,EAAJA,IAAAA;EACF,OAAC,CAAC,CAAA;EACJ,KAAA;EACF,GAAA;IACA,SAASiE,GAAGA,CAACd,MAAM,EAAE;EACnB;EACA,IAAA,IAAIW,OAAO,GAAGN,KAAK,CAACU,GAAG,EAAE,CAAA;MACzBX,YAAY,GAAGC,KAAK,CAACA,KAAK,CAAC1K,MAAM,GAAG,CAAC,CAAC,CAAA;EACtC,IAAA,IAAIyK,YAAY,EAAE;EAChBO,MAAAA,OAAO,CAACrM,MAAM,GAAG8L,YAAY,CAACzD,GAAG,CAAA;EACjCyD,MAAAA,YAAY,CAACpD,QAAQ,CAAC7F,IAAI,CAACwJ,OAAO,CAAC,CAAA;EACrC,KAAA;EACF,GAAA;;EAEA;EACA,EAAA,OAAOT,IAAI,EAAE;EACX,IAAA,IAAIc,OAAO,GAAGd,IAAI,CAACe,OAAO,CAAC,GAAG,CAAC,CAAA;MAC/B,IAAID,OAAO,KAAK,CAAC,EAAE;EACjB;EACA;QACA,IAAME,aAAa,GAAGC,aAAa,EAAE,CAAA;EACrC,MAAA,IAAID,aAAa,EAAE;UACjBT,KAAK,CAACS,aAAa,CAACE,OAAO,EAAEF,aAAa,CAACX,KAAK,CAAC,CAAA;EACjD,QAAA,SAAA;EACF,OAAA;EACA;EACA,MAAA,IAAIc,WAAW,GAAGnB,IAAI,CAACoB,KAAK,CAACtB,MAAM,CAAC,CAAA;EACpC,MAAA,IAAIqB,WAAW,EAAE;EACfE,QAAAA,OAAO,CAACF,WAAW,CAAC,CAAC,CAAC,CAAC1L,MAAM,CAAC,CAAA;EAC9BmL,QAAAA,GAAG,CAACO,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;EACnB,QAAA,SAAA;EACF,OAAA;EACF,KAAA;EACA;EACA,IAAA,IAAIxE,IAAI,GAAA,KAAA,CAAA,CAAA;MACR,IAAImE,OAAO,GAAG,CAAC,EAAE;QACfnE,IAAI,GAAGqD,IAAI,CAACsB,SAAS,CAAC,CAAC,EAAER,OAAO,CAAC,CAAA;EACnC,KAAA;EACA,IAAA,IAAInE,IAAI,EAAE;EACR0E,MAAAA,OAAO,CAAC1E,IAAI,CAAClH,MAAM,CAAC,CAAA;QACpBiL,MAAM,CAAC/D,IAAI,CAAC,CAAA;EACd,KAAA;EACF,GAAA;;EAEA;IACA,SAASsE,aAAaA,GAAG;MACvB,IAAMV,KAAK,GAAGP,IAAI,CAACoB,KAAK,CAACzB,YAAY,CAAC,CAAC;MACvC,IAAI,CAACY,KAAK,EAAE;EACV;EACA,MAAA,OAAA;EACF,KAAA;EACA,IAAA,IAAIa,KAAK,GAAG;EACVF,MAAAA,OAAO,EAAEX,KAAK,CAAC,CAAC,CAAC;EACjBF,MAAAA,KAAK,EAAE,EAAA;OACR,CAAA;EACD;EACAgB,IAAAA,OAAO,CAACd,KAAK,CAAC,CAAC,CAAC,CAAC9K,MAAM,CAAC,CAAA;EACxB;EACA,IAAA,IAAI8L,IAAI,CAAA;EACR,IAAA,IAAIX,GAAG,CAAA;MACP,OAAO,EAAEA,GAAG,GAAGZ,IAAI,CAACoB,KAAK,CAACvB,aAAa,CAAC,CAAC,KAAK0B,IAAI,GAAGvB,IAAI,CAACoB,KAAK,CAAC5B,SAAS,CAAC,CAAC,EAAE;EAC3E4B,MAAAA,KAAK,CAACf,KAAK,CAACpJ,IAAI,CAAC;EAAEuK,QAAAA,IAAI,EAAED,IAAI,CAAC,CAAC,CAAC;EAAE5K,QAAAA,KAAK,EAAE4K,IAAI,CAAC,CAAC,CAAC,IAAIA,IAAI,CAAC,CAAC,CAAC,IAAIA,IAAI,CAAC,CAAC,CAAA;EAAE,OAAC,CAAC,CAAA;EACzEF,MAAAA,OAAO,CAACE,IAAI,CAAC,CAAC,CAAC,CAAC9L,MAAM,CAAC,CAAA;EACzB,KAAA;EACA,IAAA,IAAImL,GAAG,EAAE;EACPS,MAAAA,OAAO,CAACT,GAAG,CAAC,CAAC,CAAC,CAACnL,MAAM,CAAC,CAAA;EACtB,MAAA,OAAO2L,KAAK,CAAA;EACd,KAAA;EACF,GAAA;IACA,SAASC,OAAOA,CAACI,CAAC,EAAE;EAClBzB,IAAAA,IAAI,GAAGA,IAAI,CAACsB,SAAS,CAACG,CAAC,CAAC,CAAA;EAC1B,GAAA;EACA,EAAA,OAAOxB,IAAI,CAAA;EACb;;EC/GA;;EAEA;EACA,IAAMyB,YAAY,GAAG,0BAA0B,CAAA;EAC/C,SAASC,QAAQA,CAACtB,KAAK,EAAE;IACvB,IAAIuB,GAAG,GAAG,EAAE,CAAA;IAAC,IAAA3G,KAAA,GAAAA,SAAAA,KAAAA,GAC0B;EACrC,IAAA,IAAIsG,IAAI,GAAGlB,KAAK,CAACtI,CAAC,CAAC,CAAA;EACnB,IAAA,IAAIwJ,IAAI,CAACC,IAAI,KAAK,OAAO,EAAE;QACzB,IAAIvH,GAAG,GAAG,EAAE,CAAA;EACZsH,MAAAA,IAAI,CAAC5K,KAAK,CAACqD,KAAK,CAAC,GAAG,CAAC,CAACjG,OAAO,CAAC,UAACuB,IAAI,EAAK;EACtC,QAAA,IAAAuM,WAAA,GAAiBvM,IAAI,CAAC0E,KAAK,CAAC,GAAG,CAAC;YAAA8H,YAAA,GAAAC,cAAA,CAAAF,WAAA,EAAA,CAAA,CAAA;EAA3BtN,UAAAA,GAAG,GAAAuN,YAAA,CAAA,CAAA,CAAA;EAAEE,UAAAA,GAAG,GAAAF,YAAA,CAAA,CAAA,CAAA,CAAA;EACb7H,QAAAA,GAAG,CAAC1F,GAAG,CAAC,GAAGyN,GAAG,CAAA;EAChB,OAAC,CAAC,CAAA;QACFT,IAAI,CAAC5K,KAAK,GAAGsD,GAAG,CAAA;EAClB,KAAA;EACA2H,IAAAA,GAAG,OAAA1N,MAAA,CAAOqN,IAAI,CAACC,IAAI,EAAAtN,GAAAA,CAAAA,CAAAA,MAAA,CAAI+N,IAAI,CAACC,SAAS,CAACX,IAAI,CAAC5K,KAAK,CAAC,EAAG,GAAA,CAAA,CAAA;KACrD,CAAA;EAXD,EAAA,KAAK,IAAIoB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsI,KAAK,CAAC5K,MAAM,EAAEsC,CAAC,EAAE,EAAA;MAAAkD,KAAA,EAAA,CAAA;EAAA,GAAA;EAYrC,EAAA,OAAA,GAAA,CAAA/G,MAAA,CAAW0N,GAAG,CAACO,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAA,GAAA,CAAA,CAAI;EACjC,CAAA;;EACA,SAASC,WAAWA,CAAClG,EAAE,EAAE;EACvB,EAAA,IAAIY,QAAQ,GAAGZ,EAAE,CAACY,QAAQ,CAAA;EAC1B,EAAA,IAAIA,QAAQ,EAAE;EACZ,IAAA,OAAOA,QAAQ,CAAC2B,GAAG,CAAC,UAACpK,KAAK,EAAA;QAAA,OAAKgO,GAAG,CAAChO,KAAK,CAAC,CAAA;EAAA,KAAA,CAAC,CAACiO,IAAI,CAAC,GAAG,CAAC,CAAA;EACtD,GAAA;EACF,CAAA;EACA,SAASD,GAAGA,CAACE,IAAI,EAAE;EACjB;EACA,EAAA,IAAIA,IAAI,CAACjC,IAAI,KAAK,CAAC,EAAE;EACnB;MACA,OAAOkC,QAAQ,CAACD,IAAI,CAAC,CAAA;EACvB,GAAC,MAAM;EACL;EACA,IAAA,IAAI5F,IAAI,GAAG4F,IAAI,CAAC5F,IAAI,CAAA;EACpB,IAAA,IAAI,CAAC+E,YAAY,CAACe,IAAI,CAAC9F,IAAI,CAAC,EAAE;EAC5B;EACA,MAAA,OAAA,KAAA,CAAAzI,MAAA,CAAa+N,IAAI,CAACC,SAAS,CAACvF,IAAI,CAAC,EAAA,GAAA,CAAA,CAAA;EACnC,KAAA;EACA;MACA,IAAI+F,MAAM,GAAG,EAAE,CAAA;EACf;EACD,IAAA,IAAIC,SAAS,GAAGjB,YAAY,CAACiB,SAAS,GAAG,CAAC,CAAA;EACzC,IAAA,IAAIvB,KAAK,CAAA;MACT,OAAQA,KAAK,GAAGM,YAAY,CAACkB,IAAI,CAACjG,IAAI,CAAC,EAAG;EACxC,MAAA,IAAI+B,KAAK,GAAG0C,KAAK,CAAC1C,KAAK,CAAA;QACvB,IAAIA,KAAK,GAAGiE,SAAS,EAAE;EACrBD,QAAAA,MAAM,CAACzL,IAAI,CAACgL,IAAI,CAACC,SAAS,CAACvF,IAAI,CAACwF,KAAK,CAACQ,SAAS,EAAEjE,KAAK,CAAC,CAAC,CAAC,CAAA;EAC3D,OAAA;EACAgE,MAAAA,MAAM,CAACzL,IAAI,CAAA/C,KAAAA,CAAAA,MAAA,CAAOkN,KAAK,CAAC,CAAC,CAAC,CAACyB,IAAI,EAAE,EAAI,GAAA,CAAA,CAAA,CAAA;QACrCF,SAAS,GAAGjE,KAAK,GAAG0C,KAAK,CAAC,CAAC,CAAC,CAAC3L,MAAM,CAAA;EACnC,MAAA,IAAIkN,SAAS,GAAGhG,IAAI,CAAClH,MAAM,EAAE;EAC3BiN,QAAAA,MAAM,CAACzL,IAAI,CAACgL,IAAI,CAACC,SAAS,CAACvF,IAAI,CAACwF,KAAK,CAACQ,SAAS,CAAC,CAAC,CAAC,CAAA;EACpD,OAAA;EACF,KAAA;EACE,IAAA,OAAA,KAAA,CAAAzO,MAAA,CAAawO,MAAM,CAACJ,IAAI,CAAC,GAAG,CAAC,EAAA,GAAA,CAAA,CAAA;EACjC,GAAA;EAEF,CAAA;EACO,SAASE,QAAQA,CAACtG,EAAE,EAAE;EAC3B,EAAA,IAAIY,QAAQ,GAAGsF,WAAW,CAAClG,EAAE,CAAC,CAAA;EAC9B,EAAA,IAAI4G,IAAI,GAAA,MAAA,CAAA5O,MAAA,CAAUgI,EAAE,CAACO,GAAG,EAAAvI,IAAAA,CAAAA,CAAAA,MAAA,CAAKgI,EAAE,CAACmE,KAAK,CAAC5K,MAAM,GAAAvB,EAAAA,CAAAA,MAAA,CAAMyN,QAAQ,CAACzF,EAAE,CAACmE,KAAK,CAAC,UAAW,EAAAnM,GAAAA,CAAAA,CAAAA,MAAA,CAAI4I,QAAQ,MAAA5I,MAAA,CAAM4I,QAAQ,CAAA,GAAK,MAAM,EAAG,GAAA,CAAA,CAAA;EACvH,EAAA,OAAOgG,IAAI,CAAA;EACb;;EC5DA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAASC,iBAAiBA,CAAC7G,EAAE,EAAE;EACpC,EAAA,IAAI8G,GAAG,GAAGjD,SAAS,CAAC7D,EAAE,CAAC,CAAA;EACvB;EACC,EAAA,IAAI4G,IAAI,GAACN,QAAQ,CAACQ,GAAG,CAAC,CAAC;EACvB;IACA,IAAIC,MAAM,GAAC,IAAIC,QAAQ,sBAAAhP,MAAA,CAAsB4O,IAAI,EAAI,GAAA,CAAA,CAAA,CAAA;EACrD,EAAA,OAAOG,MAAM,CAAA;EAChB;;ECbO,SAASE,SAASA,CAACzO,GAAG,EAAE;EAC7BA,EAAAA,GAAG,CAACO,SAAS,CAACmO,KAAK,GAAG,UAAU9O,OAAO,EAAE;EACvC,IAAA,IAAIiF,EAAE,GAAG,IAAI,CAAC;MACdA,EAAE,CAACsB,QAAQ,GAAGvG,OAAO,CAAA;EACrBiF,IAAAA,EAAE,CAACsB,QAAQ,GAAG1G,YAAY,CAACO,GAAG,CAACJ,OAAO,EAAEA,OAAO,CAAC,CAAC;EACjDwK,IAAAA,QAAQ,CAACvF,EAAE,EAAE,cAAc,CAAC,CAAA;EAC5B;MACAoB,SAAS,CAACpB,EAAE,CAAC,CAAA;EACbuF,IAAAA,QAAQ,CAACvF,EAAE,EAAE,SAAS,CAAC,CAAA;EACvB;EACA,IAAA,IAAIA,EAAE,CAACsB,QAAQ,CAACqB,EAAE,EAAE;QAClB3C,EAAE,CAAC8J,MAAM,CAAC9J,EAAE,CAACsB,QAAQ,CAACqB,EAAE,CAAC,CAAA;EAC3B,KAAA;KACD,CAAA;EAEDxH,EAAAA,GAAG,CAACO,SAAS,CAACoO,MAAM,GAAG,UAAUnH,EAAE,EAAE;MACnC,IAAI3C,EAAE,GAAG,IAAI,CAAA;EACb2C,IAAAA,EAAE,GAAGlD,QAAQ,CAACsK,aAAa,CAACpH,EAAE,CAAC,CAAA;EAC/B3C,IAAAA,EAAE,CAAC8F,GAAG,GAAGnD,EAAE,CAAC;EACZ,IAAA,IAAI5H,OAAO,GAAGiF,EAAE,CAACsB,QAAQ,CAAA;EACzB;EACA,IAAA,IAAI,CAACvG,OAAO,CAAC2O,MAAM,EAAE;EACnB,MAAA,IAAIM,QAAQ,GAAGjP,OAAO,CAACiP,QAAQ,CAAA;EAC/B,MAAA,IAAI,CAACA,QAAQ,IAAIrH,EAAE,EAAE;EACnB;UACAA,EAAE,GAAGA,EAAE,CAACsH,SAAS,CAAA;EACjB,QAAA,IAAIP,MAAM,GAAGF,iBAAiB,CAAC7G,EAAE,CAAC,CAAC;EACnC5H,QAAAA,OAAO,CAAC2O,MAAM,GAAGA,MAAM,CAAC;EAC1B,OAAA;EACF,KAAA;;EACApE,IAAAA,eAAe,CAACtF,EAAM,CAAC,CAAA;KACxB,CAAA;EACH;;ECpCO,SAASkK,WAAWA,CAAC/O,GAAG,EAAE;EAC/BA,EAAAA,GAAG,CAACO,SAAS,CAACyO,EAAE,GAAG,YAAY;EAC7B;EACA;EACA,IAAA,OAAO9F,aAAa,CAAA/H,KAAA,CAAA,KAAA,CAAA,EAAIL,SAAS,CAAC,CAAA;KACnC,CAAA;EACDd,EAAAA,GAAG,CAACO,SAAS,CAAC0O,EAAE,GAAG,UAAUhH,IAAI,EAAE;EACjC;MACA,OAAOiH,UAAU,CAACjH,IAAI,CAAC,CAAA;KACxB,CAAA;EACDjI,EAAAA,GAAG,CAACO,SAAS,CAAC4O,EAAE,GAAG,UAAU7B,GAAG,EAAE;EAChC;EACA,IAAA,OAAOA,GAAG,KAAK,IAAI,GAAG,EAAE,GAAG1K,OAAA,CAAO0K,GAAG,MAAK,QAAQ,GAAGC,IAAI,CAACC,SAAS,CAACF,GAAG,CAAC,GAAGA,GAAG,CAAA;KAC/E,CAAA;EAEDtN,EAAAA,GAAG,CAACO,SAAS,CAACgK,OAAO,GAAG,YAAY;EAClC;MACA,IAAI1F,EAAE,GAAG,IAAI,CAAA;EACb,IAAA,IAAI0J,MAAM,GAAG1J,EAAE,CAACsB,QAAQ,CAACoI,MAAM,CAAA;EAC/B,IAAA,IAAIjH,KAAK,GAAGiH,MAAM,CAAC7I,IAAI,CAAC,IAAI,CAAC,CAAA;EAC5B,IAAA,OAAO4B,KAAK,CAAA;KAEd,CAAA;EACH,CAAA;EAEA,SAAS4B,aAAaA,CAAEnB,GAAG,EAA0B;EAAA,EAAA,IAAxB7I,IAAI,GAAA4B,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAkG,SAAA,GAAAlG,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IAAA,KAAAD,IAAAA,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAIqH,QAAQ,OAAA9H,KAAA,CAAAO,IAAA,GAAAA,CAAAA,GAAAA,IAAA,WAAAI,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA,EAAA,EAAA;EAARmH,IAAAA,QAAQ,CAAAnH,IAAA,GAAAH,CAAAA,CAAAA,GAAAA,SAAA,CAAAG,IAAA,CAAA,CAAA;EAAA,GAAA;EAChD,EAAA,OAAOqG,KAAK,CAACS,GAAG,EAAE7I,IAAI,EAAEA,IAAI,KAAJA,IAAAA,IAAAA,IAAI,uBAAJA,IAAI,CAAEW,GAAG,EAAEuI,QAAQ,CAAC,CAAA;EAC9C,CAAA;EACA;EACA,SAASd,KAAKA,CAACS,GAAG,EAAE7I,IAAI,EAAEW,GAAG,EAAEuI,QAAQ,EAAEH,IAAI,EAAE;IAC7C,OAAO;EACLF,IAAAA,GAAG,EAAHA,GAAG;EACH7I,IAAAA,IAAI,EAAJA,IAAI;EACJW,IAAAA,GAAG,EAAHA,GAAG;EACHuI,IAAAA,QAAQ,EAARA,QAAQ;EACRH,IAAAA,IAAI,EAAJA,IAAAA;KACD,CAAA;EACH,CAAA;EACA;EACA,SAASiH,UAAUA,CAACjH,IAAI,EAAE;IACxB,OAAOX,KAAK,CAACN,SAAS,EAAEA,SAAS,EAAEA,SAAS,EAAEA,SAAS,EAAEiB,IAAI,CAAC,CAAA;EAChE,CAAA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;ECjDA;EACA;EACA;EAQA,SAASjI,GAAGA,CAACJ,OAAO,EAAE;EACpB;EACA,EAAA,IAAI,CAAC8O,KAAK,CAAC9O,OAAO,CAAC,CAAA;EACrB,CAAA;EACA6O,SAAS,CAACzO,GAAG,CAAC,CAAA;EACdwK,cAAc,CAACxK,GAAG,CAAC,CAAC;EACpB+O,WAAW,CAAC/O,GAAG,CAAC,CAAC;EACjB6G,UAAU,CAAC7G,GAAG,CAAC,CAAC;EAChB;EACAD,WAAW,CAACC,GAAG,CAAC;;;;;;;;"}